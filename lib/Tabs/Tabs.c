/* Generated by wbuild from "Tabs.w"
** (generator version $Revision$ of $Date$)
*/
#if HAVE_CONFIG_H
#  include <config.h>
#endif

#include <X11/IntrinsicP.h>
#include <X11/StringDefs.h>
#line 898 "Tabs.w"
#include <stdio.h>
#line 899 "Tabs.w"
#include <X11/extensions/shape.h>
#line 900 "Tabs.w"
#include <Xfwf/Converters.h>
#line 901 "Tabs.w"
#include <X11/Xmu/CharSet.h>
#line 902 "Tabs.w"
#include "rotated.h"
#include <Xfwf/TabsP.h>
#line 841 "Tabs.w"
static void activate(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);

static XtActionsRec actionsList[] = {
{"activate", activate},
};

static char defaultTranslations[] = "\
<Btn1Down>,<Btn1Up>: activate() \n\
";
static void _resolve_inheritance(
#if NeedFunctionPrototypes
WidgetClass
#endif
);
#line 151 "Tabs.w"
static void class_initialize(
#if NeedFunctionPrototypes
void
#endif
);
#line 170 "Tabs.w"
static void initialize(
#if NeedFunctionPrototypes
Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 205 "Tabs.w"
static Boolean  set_values(
#if NeedFunctionPrototypes
Widget ,Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 264 "Tabs.w"
static void realize(
#if NeedFunctionPrototypes
Widget,XtValueMask *,XSetWindowAttributes *
#endif
);
#line 272 "Tabs.w"
static void resize(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 287 "Tabs.w"
static void expose(
#if NeedFunctionPrototypes
Widget,XEvent *,Region 
#endif
);
#line 317 "Tabs.w"
static void border_highlight(
#if NeedFunctionPrototypes
void
#endif
);
#line 321 "Tabs.w"
static void border_unhighlight(
#if NeedFunctionPrototypes
void
#endif
);
#line 327 "Tabs.w"
static void destroy(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 344 "Tabs.w"
#define min(a, b) ((a )<(b )?(a ):(b ))


#line 351 "Tabs.w"
static void compute_tabsizes(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 401 "Tabs.w"
static void comp_hor_tab_shape(
#if NeedFunctionPrototypes
Widget,int ,XPoint  p[12],int *,int *,int *
#endif
);
#line 469 "Tabs.w"
static void comp_ver_tab_shape(
#if NeedFunctionPrototypes
Widget,int ,XPoint  p[12],int *,int *,int *
#endif
);
#line 534 "Tabs.w"
static void draw_border(
#if NeedFunctionPrototypes
Widget,XPoint  poly[12]
#endif
);
#line 562 "Tabs.w"
static void draw_hor_tab(
#if NeedFunctionPrototypes
Widget,Region ,int 
#endif
);
#line 604 "Tabs.w"
static void draw_ver_tab(
#if NeedFunctionPrototypes
Widget,Region ,int 
#endif
);
#line 658 "Tabs.w"
static void create_topgc(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 670 "Tabs.w"
static void create_bottomgc(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 682 "Tabs.w"
static void create_textgc(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 694 "Tabs.w"
static void create_fillgc(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 705 "Tabs.w"
static void create_backgc(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 718 "Tabs.w"
static void copy_bg(
#if NeedFunctionPrototypes
Widget,int ,XrmValue *
#endif
);
#line 728 "Tabs.w"
static void set_shape(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 767 "Tabs.w"
#define done(type, value) do {\
	if (to->addr != NULL) {\
	    if (to->size < sizeof(type)) {\
	        to->size = sizeof(type);\
	        return False;\
	    }\
	    *(type*)(to->addr) = (value);\
        } else {\
	    static type static_val;\
	    static_val = (value);\
	    to->addr = (XtPointer)&static_val;\
        }\
        to->size = sizeof(type);\
        return True;\
    }while (0 )


#line 784 "Tabs.w"
static Boolean  cvtStringToTabsOrientation(
#if NeedFunctionPrototypes
Display *,XrmValuePtr ,Cardinal *,XrmValuePtr ,XrmValuePtr ,XtPointer *
#endif
);
#line 811 "Tabs.w"
static Boolean  cvtTabsOrientationToString(
#if NeedFunctionPrototypes
Display *,XrmValuePtr ,Cardinal *,XrmValuePtr ,XrmValuePtr ,XtPointer *
#endif
);
#line 351 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 351 "Tabs.w"
static void compute_tabsizes(Widget self)
#else
#line 351 "Tabs.w"
static void compute_tabsizes(self)Widget self;
#endif
#line 352 "Tabs.w"
{
    int maxwd, basewidth, delta, i, n = ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs + 1;
    int sum, len, h, length, breadth, shad = ((XfwfTabsWidget)self)->xfwfFrame.frameWidth;

    if (((XfwfTabsWidget)self)->xfwfTabs.offsets) XtFree((XtPointer) ((XfwfTabsWidget)self)->xfwfTabs.offsets);
    if (((XfwfTabsWidget)self)->xfwfTabs.tabwidths) XtFree((XtPointer) ((XfwfTabsWidget)self)->xfwfTabs.tabwidths);
    ((XfwfTabsWidget)self)->xfwfTabs.offsets = (XtPointer) XtMalloc(n * sizeof(*((XfwfTabsWidget)self)->xfwfTabs.offsets));
    ((XfwfTabsWidget)self)->xfwfTabs.tabwidths = (XtPointer) XtMalloc(n * sizeof(*((XfwfTabsWidget)self)->xfwfTabs.tabwidths));

    if (((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfUpTabs || ((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfDownTabs) {
	length = ((XfwfTabsWidget)self)->core.width;
	breadth = ((XfwfTabsWidget)self)->core.height;
    } else {
	length = ((XfwfTabsWidget)self)->core.height;
	breadth = ((XfwfTabsWidget)self)->core.width;
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage != 0) {		/* Fixed width tabs */
	basewidth = ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage * length/100;
	if (n > 1) delta = (length - basewidth)/(((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs);
	for (i = 0; i < n; i++) {
	    ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] = basewidth;
	    ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] = i * delta;
	}
    } else if (((XfwfTabsWidget)self)->xfwfTabs.labels == NULL) {		/* Empty tabs */
	basewidth = length/n;
	delta = (length - basewidth)/(((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs);
	for (i = 0; i < n; i++) {
	    ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] = basewidth;
	    ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] = i * delta;
	}
    } else {					/* Variable width tabs */
	sum = 0;
	h = 2 * (((XfwfTabsWidget)self)->xfwfTabs.cornerwidth + shad + ((XfwfTabsWidget)self)->xfwfTabs.textmargin);
	maxwd = length - n * (shad + ((XfwfTabsWidget)self)->xfwfTabs.textmargin);
	for (i = 0; i < n; i++) {
	    len = strlen(((XfwfTabsWidget)self)->xfwfTabs.labels[i]);
	    ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] = min(maxwd, XTextWidth(((XfwfTabsWidget)self)->xfwfTabs.font,((XfwfTabsWidget)self)->xfwfTabs.labels[i],len) + h);
	    sum += ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i];
	}
	((XfwfTabsWidget)self)->xfwfTabs.offsets[0] = 0;
	if (length >= sum)
	    delta = (length - sum)/(n - 1);	/* Between tabs */
	else
	    delta = -((sum - length + n - 2)/(n - 1)); /* Round down! */
	for (i = 1; i < n; i++)
	    ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i-1] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i-1] + delta;
    }
}
#line 401 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 401 "Tabs.w"
static void comp_hor_tab_shape(Widget self,int  i,XPoint  p[12],int * x0,int * x1,int * midy)
#else
#line 401 "Tabs.w"
static void comp_hor_tab_shape(self,i,p,x0,x1,midy)Widget self;int  i;XPoint  p[12];int * x0;int * x1;int * midy;
#endif
#line 402 "Tabs.w"
{
    int shad = ((XfwfTabsWidget)self)->xfwfFrame.frameWidth;
    int k = min(((XfwfTabsWidget)self)->xfwfTabs.cornerheight, (((XfwfTabsWidget)self)->core.height - shad)/2);
    /*
     *                4 o-------------o 5
     *                 /               \
     *              3 o                 o 6
     *                |                 |
     *              2 o                 o 7
     *             1 /                   \ 8
     *   0 o--------o                     o--------o 9
     *  11 o---------------------------------------o 10
     *
     *  11 o---------------------------------------o 10
     *   0 o--------o                     o--------o 9
     *             1 \                   / 8
     *              2 o                 o 7
     *                |                 |
     *              3 o                 o 6
     *                 \               /
     *                4 o-------------o 5
     */
    p[0].x = 0;
    p[1].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i];
    p[2].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[3].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[4].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + 2 * ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[5].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] - 2 * ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[6].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] - ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[7].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] - ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[8].x = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i];
    p[9].x = ((XfwfTabsWidget)self)->core.width;
    p[10].x = ((XfwfTabsWidget)self)->core.width;
    p[11].x = 0;

    if (((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfUpTabs) {
	p[0].y = ((XfwfTabsWidget)self)->core.height - shad;
	p[1].y = ((XfwfTabsWidget)self)->core.height - shad;
	p[2].y = ((XfwfTabsWidget)self)->core.height - shad - k;
	p[3].y = k;
	p[4].y = 0;
	p[5].y = 0;
	p[6].y = k;
	p[7].y = ((XfwfTabsWidget)self)->core.height - shad - k;
	p[8].y = ((XfwfTabsWidget)self)->core.height - shad;
	p[9].y = ((XfwfTabsWidget)self)->core.height - shad;
	p[10].y = ((XfwfTabsWidget)self)->core.height;
	p[11].y = ((XfwfTabsWidget)self)->core.height;
    } else {
	p[0].y = shad;
	p[1].y = shad;
	p[2].y = shad + k;
	p[3].y = ((XfwfTabsWidget)self)->core.height - k;
	p[4].y = ((XfwfTabsWidget)self)->core.height;
	p[5].y = ((XfwfTabsWidget)self)->core.height;
	p[6].y = ((XfwfTabsWidget)self)->core.height - k;
	p[7].y = shad + k;
	p[8].y = shad;
	p[9].y = shad;
	p[10].y = 0;
	p[11].y = 0;
    }
    *x0 = p[4].x;
    *x1 = p[5].x;
    *midy = (p[1].y + p[4].y)/2;
}
#line 469 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 469 "Tabs.w"
static void comp_ver_tab_shape(Widget self,int  i,XPoint  p[12],int * y0,int * y1,int * midx)
#else
#line 469 "Tabs.w"
static void comp_ver_tab_shape(self,i,p,y0,y1,midx)Widget self;int  i;XPoint  p[12];int * y0;int * y1;int * midx;
#endif
#line 470 "Tabs.w"
{
    int shad = ((XfwfTabsWidget)self)->xfwfFrame.frameWidth;
    int k = min(((XfwfTabsWidget)self)->xfwfTabs.cornerheight, (((XfwfTabsWidget)self)->core.width - shad)/2);
    /*
     *       0 o_o 11  11 o_o 0
     *         | |        | |
     *       1 o |        | o 1
     *     3 2/  |        |  \2 3
     *     o-o   |        |   o-o
     *    /      |        |      \
     * 4 o       |        |       o 4
     *   |       |        |       |
     * 5 o       |        |       o 5
     *    \      |        |      /
     *     o-o   |        |   o-o
     *     6 7\  |        |  /7 6  
     *       8 o |        | o 8
     *         | |        | |
     *       9 o_o 10  10 o_o 9
     */
    if (((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfLeftTabs) {
	p[0].x = ((XfwfTabsWidget)self)->core.width - shad;
	p[1].x = ((XfwfTabsWidget)self)->core.width - shad;
	p[2].x = ((XfwfTabsWidget)self)->core.width - shad - k;
	p[3].x = k;
	p[4].x = 0;
	p[5].x = 0;
	p[6].x = k;
	p[7].x = ((XfwfTabsWidget)self)->core.width - shad - k;
	p[8].x = ((XfwfTabsWidget)self)->core.width - shad;
	p[9].x = ((XfwfTabsWidget)self)->core.width - shad;
	p[10].x = ((XfwfTabsWidget)self)->core.width;
	p[11].x = ((XfwfTabsWidget)self)->core.width;
    } else {
	p[0].x = shad;
	p[1].x = shad;
	p[2].x = shad + k;
	p[3].x = ((XfwfTabsWidget)self)->core.width - k;
	p[4].x = ((XfwfTabsWidget)self)->core.width;
	p[5].x = ((XfwfTabsWidget)self)->core.width;
	p[6].x = ((XfwfTabsWidget)self)->core.width - k;
	p[7].x = shad + k;
	p[8].x = shad;
	p[9].x = shad;
	p[10].x = 0;
	p[11].x = 0;
    }
    p[0].y = 0;
    p[1].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i];
    p[2].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[3].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[4].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + 2 * ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[5].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] - 2 * ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[6].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] - ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[7].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i] - ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth;
    p[8].y = ((XfwfTabsWidget)self)->xfwfTabs.offsets[i] + ((XfwfTabsWidget)self)->xfwfTabs.tabwidths[i];
    p[9].y = ((XfwfTabsWidget)self)->core.height;
    p[10].y = ((XfwfTabsWidget)self)->core.height;
    p[11].y = 0;
    *y0 = p[4].y;
    *y1 = p[5].y;
    *midx = (p[1].x + p[4].x)/2;
}
#line 534 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 534 "Tabs.w"
static void draw_border(Widget self,XPoint  poly[12])
#else
#line 534 "Tabs.w"
static void draw_border(self,poly)Widget self;XPoint  poly[12];
#endif
#line 535 "Tabs.w"
{
    Display *dpy = XtDisplay(self);
    Window win = XtWindow(self);

    switch (((XfwfTabsWidget)self)->xfwfTabs.orientation) {
    case XfwfUpTabs:
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.topgc, poly, 6, CoordModeOrigin);
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.bottomgc, poly + 5, 4, CoordModeOrigin);
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.topgc, poly + 8, 2, CoordModeOrigin);
	break;
    case XfwfLeftTabs:
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.topgc, poly, 7, CoordModeOrigin);
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.bottomgc, poly + 6, 2, CoordModeOrigin);
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.topgc, poly + 7, 3, CoordModeOrigin);
	break;
    case XfwfRightTabs:
    case XfwfDownTabs:
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.bottomgc, poly, 2, CoordModeOrigin);
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.topgc, poly + 1, 4, CoordModeOrigin);
	XDrawLines(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.bottomgc, poly + 4, 6, CoordModeOrigin);
    }
}
#line 562 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 562 "Tabs.w"
static void draw_hor_tab(Widget self,Region  region,int  i)
#else
#line 562 "Tabs.w"
static void draw_hor_tab(self,region,i)Widget self;Region  region;int  i;
#endif
#line 563 "Tabs.w"
{
    XPoint p[12];
    Display *dpy = XtDisplay(self);
    Window win = XtWindow(self);
    Region clip;
    int x0, x1, midy;

    comp_hor_tab_shape(self, i, p, &x0, &x1, &midy);
    clip = XPolygonRegion(p, XtNumber(p), WindingRule);
    if (region) XIntersectRegion(clip, region, clip);
    if (XEmptyRegion(clip)) return;

    XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.textgc, clip);
    XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.topgc, clip);
    XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.bottomgc, clip);
    if (i == ((XfwfTabsWidget)self)->xfwfTabs.lefttabs) {
	XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.backgc, clip);
	XFillPolygon(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.backgc,
		     p, XtNumber(p), Convex, CoordModeOrigin);
    } else {
	XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.fillgc, clip);
	XFillPolygon(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.fillgc,
		     p, XtNumber(p), Convex, CoordModeOrigin);
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.labels) {
	int w, y, x, len = strlen(((XfwfTabsWidget)self)->xfwfTabs.labels[i]);
	y = midy - (((XfwfTabsWidget)self)->xfwfTabs.font->ascent + ((XfwfTabsWidget)self)->xfwfTabs.font->descent)/2 + ((XfwfTabsWidget)self)->xfwfTabs.font->ascent;
	w = XTextWidth(((XfwfTabsWidget)self)->xfwfTabs.font, ((XfwfTabsWidget)self)->xfwfTabs.labels[i], len);
	if (i == ((XfwfTabsWidget)self)->xfwfTabs.lefttabs
	    || ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage <= 100/(((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs + 1))
	    x = (x0 + x1 - w)/2;		/* Centered text */
	else if (i < ((XfwfTabsWidget)self)->xfwfTabs.lefttabs)
	    x = x0 + ((XfwfTabsWidget)self)->xfwfTabs.textmargin;		/* Left aligned text */
	else
	    x = x1 - ((XfwfTabsWidget)self)->xfwfTabs.textmargin - w;		/* Right aligned text */
	XDrawString(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.textgc, x, y, ((XfwfTabsWidget)self)->xfwfTabs.labels[i], len);
    }
    draw_border(self, p);
    XDestroyRegion(clip);
}
#line 604 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 604 "Tabs.w"
static void draw_ver_tab(Widget self,Region  region,int  i)
#else
#line 604 "Tabs.w"
static void draw_ver_tab(self,region,i)Widget self;Region  region;int  i;
#endif
#line 605 "Tabs.w"
{
    Display *dpy = XtDisplay(self);
    Window win = XtWindow(self);
    XPoint p[12];
    Region clip;
    int y0, y1, midx;

    comp_ver_tab_shape(self, i, p, &y0, &y1, &midx);
    clip = XPolygonRegion(p, XtNumber(p), WindingRule);
    if (region) XIntersectRegion(clip, region, clip);
    if (XEmptyRegion(clip)) return;

    XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.textgc, clip);
    XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.topgc, clip);
    XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.bottomgc, clip);
    if (i == ((XfwfTabsWidget)self)->xfwfTabs.lefttabs) {
	XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.backgc, clip);
	XFillPolygon(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.backgc,
		     p, XtNumber(p), Convex, CoordModeOrigin);
    } else {
	XSetRegion(dpy, ((XfwfTabsWidget)self)->xfwfTabs.fillgc, clip);
	XFillPolygon(dpy, win, ((XfwfTabsWidget)self)->xfwfTabs.fillgc,
		     p, XtNumber(p), Convex, CoordModeOrigin);
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.labels) {
	int y, align;
	float angle = ((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfLeftTabs ? 90.0 : -90.0;
	if (i == ((XfwfTabsWidget)self)->xfwfTabs.lefttabs
	    || ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage <= 100/(((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs + 1)) {
	    y = (y0 + y1)/2;
	    align = MCENTRE;
	} else if (i < ((XfwfTabsWidget)self)->xfwfTabs.lefttabs) {
	    y = y0 + ((XfwfTabsWidget)self)->xfwfTabs.textmargin;
	    align = ((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfLeftTabs ? MRIGHT : MLEFT;
	} else {
	    y = y1 - ((XfwfTabsWidget)self)->xfwfTabs.textmargin;
	    align = ((XfwfTabsWidget)self)->xfwfTabs.orientation == XfwfLeftTabs ? MLEFT : MRIGHT;
	}
	XRotDrawAlignedString
	    (dpy, ((XfwfTabsWidget)self)->xfwfTabs.font, angle, win, ((XfwfTabsWidget)self)->xfwfTabs.textgc, midx, y, ((XfwfTabsWidget)self)->xfwfTabs.labels[i], align);
    }
    draw_border(self, p);
    XDestroyRegion(clip);
}
#line 658 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 658 "Tabs.w"
static void create_topgc(Widget self)
#else
#line 658 "Tabs.w"
static void create_topgc(self)Widget self;
#endif
#line 659 "Tabs.w"
{
    XtGCMask mask = GCForeground | GCLineWidth;
    XGCValues values;

    if (((XfwfTabsWidget)self)->xfwfTabs.topgc != NULL) XFreeGC(XtDisplay(self), ((XfwfTabsWidget)self)->xfwfTabs.topgc);
    values.foreground = ((XfwfTabsWidget)self)->xfwfFrame.topShadowColor;
    values.line_width = 2 * ((XfwfTabsWidget)self)->xfwfFrame.frameWidth;
    ((XfwfTabsWidget)self)->xfwfTabs.topgc = XCreateGC(XtDisplay(self), RootWindowOfScreen(XtScreen(self)),
		       mask, &values);
}
#line 670 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 670 "Tabs.w"
static void create_bottomgc(Widget self)
#else
#line 670 "Tabs.w"
static void create_bottomgc(self)Widget self;
#endif
#line 671 "Tabs.w"
{
    XtGCMask mask = GCForeground | GCLineWidth;
    XGCValues values;

    if (((XfwfTabsWidget)self)->xfwfTabs.bottomgc != NULL) XFreeGC(XtDisplay(self), ((XfwfTabsWidget)self)->xfwfTabs.bottomgc);
    values.foreground = ((XfwfTabsWidget)self)->xfwfFrame.bottomShadowColor;
    values.line_width = 2 * ((XfwfTabsWidget)self)->xfwfFrame.frameWidth;
    ((XfwfTabsWidget)self)->xfwfTabs.bottomgc = XCreateGC(XtDisplay(self), RootWindowOfScreen(XtScreen(self)),
			  mask, &values);
}
#line 682 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 682 "Tabs.w"
static void create_textgc(Widget self)
#else
#line 682 "Tabs.w"
static void create_textgc(self)Widget self;
#endif
#line 683 "Tabs.w"
{
    XtGCMask mask = GCForeground | GCFont;
    XGCValues values;

    if (((XfwfTabsWidget)self)->xfwfTabs.textgc != NULL) XFreeGC(XtDisplay(self), ((XfwfTabsWidget)self)->xfwfTabs.textgc);
    values.foreground = ((XfwfTabsWidget)self)->xfwfTabs.foreground;
    values.font = ((XfwfTabsWidget)self)->xfwfTabs.font->fid;
    ((XfwfTabsWidget)self)->xfwfTabs.textgc = XCreateGC(XtDisplay(self), RootWindowOfScreen(XtScreen(self)),
			mask, &values);
}
#line 694 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 694 "Tabs.w"
static void create_fillgc(Widget self)
#else
#line 694 "Tabs.w"
static void create_fillgc(self)Widget self;
#endif
#line 695 "Tabs.w"
{
    XtGCMask mask = GCForeground;
    XGCValues values;

    if (((XfwfTabsWidget)self)->xfwfTabs.fillgc != NULL) XFreeGC(XtDisplay(self), ((XfwfTabsWidget)self)->xfwfTabs.fillgc);
    values.foreground = ((XfwfTabsWidget)self)->xfwfTabs.tabcolor;
    ((XfwfTabsWidget)self)->xfwfTabs.fillgc = XCreateGC(XtDisplay(self), RootWindowOfScreen(XtScreen(self)),
			mask, &values);
}
#line 705 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 705 "Tabs.w"
static void create_backgc(Widget self)
#else
#line 705 "Tabs.w"
static void create_backgc(self)Widget self;
#endif
#line 706 "Tabs.w"
{
    XtGCMask mask = GCForeground;
    XGCValues values;

    if (((XfwfTabsWidget)self)->xfwfTabs.backgc != NULL) XFreeGC(XtDisplay(self), ((XfwfTabsWidget)self)->xfwfTabs.backgc);
    values.foreground = ((XfwfTabsWidget)self)->core.background_pixel;
    ((XfwfTabsWidget)self)->xfwfTabs.backgc = XCreateGC(XtDisplay(self), RootWindowOfScreen(XtScreen(self)),
			mask, &values);
}
#line 718 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 718 "Tabs.w"
static void copy_bg(Widget self,int  offset,XrmValue * value)
#else
#line 718 "Tabs.w"
static void copy_bg(self,offset,value)Widget self;int  offset;XrmValue * value;
#endif
#line 719 "Tabs.w"
{
    value->addr = (XtPointer) &((XfwfTabsWidget)self)->core.background_pixel;
}
#line 728 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 728 "Tabs.w"
static void set_shape(Widget self)
#else
#line 728 "Tabs.w"
static void set_shape(self)Widget self;
#endif
#line 729 "Tabs.w"
{
    int x0, x1, midy, y0, y1, midx, i;
    Region region, clip;
    XPoint poly[12];

    if (! XtIsRealized(self)) return;

    region = XCreateRegion();

    switch (((XfwfTabsWidget)self)->xfwfTabs.orientation) {
    case XfwfUpTabs:
    case XfwfDownTabs:
	for (i = 0; i <= ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i++) {
	    comp_hor_tab_shape(self, i, poly, &x0, &x1, &midy);
	    clip = XPolygonRegion(poly, XtNumber(poly), WindingRule);
	    XUnionRegion(region, clip, region);
	    XDestroyRegion(clip);
	}
	break;
    case XfwfLeftTabs:
    case XfwfRightTabs:
	for (i = 0; i <= ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i++) {
	    comp_ver_tab_shape(self, i, poly, &y0, &y1, &midx);
	    clip = XPolygonRegion(poly, XtNumber(poly), WindingRule);
	    XUnionRegion(region, clip, region);
	    XDestroyRegion(clip);
	}
	break;
    }
    XShapeCombineRegion(XtDisplay(self), XtWindow(self), ShapeBounding,
			0, 0, region, ShapeSet);
    XDestroyRegion(region);
}
#line 784 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 784 "Tabs.w"
static Boolean  cvtStringToTabsOrientation(Display * display,XrmValuePtr  args,Cardinal * num_args,XrmValuePtr  from,XrmValuePtr  to,XtPointer * converter_data)
#else
#line 784 "Tabs.w"
static Boolean  cvtStringToTabsOrientation(display,args,num_args,from,to,converter_data)Display * display;XrmValuePtr  args;Cardinal * num_args;XrmValuePtr  from;XrmValuePtr  to;XtPointer * converter_data;
#endif
#line 785 "Tabs.w"
{
    TabsOrientation a = XfwfUpTabs;
    char *s = (char*) from->addr;

    if (*num_args != 0)
	XtAppErrorMsg
	    (XtDisplayToApplicationContext(display),
	     "cvtStringToTabsOrientation", "wrongParameters", "XtToolkitError",
	     "String to TabsOrientation conversion needs no arguments",
	     (String*) NULL, (Cardinal*) NULL);

    if (XmuCompareISOLatin1(s, "up") == 0) a = XfwfUpTabs;
    else if (XmuCompareISOLatin1(s, "uptabs") == 0) a |= XfwfUpTabs;
    else if (XmuCompareISOLatin1(s, "down") == 0) a |= XfwfDownTabs;
    else if (XmuCompareISOLatin1(s, "downtabs") == 0) a |= XfwfDownTabs;
    else if (XmuCompareISOLatin1(s, "left") == 0) a |= XfwfLeftTabs;
    else if (XmuCompareISOLatin1(s, "lefttabs") == 0) a |= XfwfLeftTabs;
    else if (XmuCompareISOLatin1(s, "right") == 0) a |= XfwfRightTabs;
    else if (XmuCompareISOLatin1(s, "righttabs") == 0) a |= XfwfRightTabs;
    else XtDisplayStringConversionWarning(display, s, "TabsOrientation");
    done(TabsOrientation, a);
}
#line 811 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 811 "Tabs.w"
static Boolean  cvtTabsOrientationToString(Display * display,XrmValuePtr  args,Cardinal * num_args,XrmValuePtr  from,XrmValuePtr  to,XtPointer * converter_data)
#else
#line 811 "Tabs.w"
static Boolean  cvtTabsOrientationToString(display,args,num_args,from,to,converter_data)Display * display;XrmValuePtr  args;Cardinal * num_args;XrmValuePtr  from;XrmValuePtr  to;XtPointer * converter_data;
#endif
#line 812 "Tabs.w"
{
    TabsOrientation *a = (TabsOrientation*) from->addr;

    if (*num_args != 0)
	XtAppErrorMsg
	    (XtDisplayToApplicationContext(display),
	     "cvtTabsOrientationToString", "wrongParameters", "XtToolkitError",
	     "TabsOrientation to String conversion needs no arguments",
	     (String*) NULL, (Cardinal*) NULL);
    switch (*a) {
    case XfwfUpTabs: done(String, "up");
    case XfwfDownTabs: done(String, "down");
    case XfwfLeftTabs: done(String, "left");
    case XfwfRightTabs: done(String, "right");
    }
    XtAppErrorMsg
	(XtDisplayToApplicationContext(display),
	 "cvtTabsOrientationToString", "illParameters", "XtToolkitError",
	     "TabsOrientation to String conversion got illegal argument",
	     (String*) NULL, (Cardinal*) NULL);
    return TRUE;
}

static XtResource resources[] = {
#line 21 "Tabs.w"
{XtNforeground,XtCForeground,XtRPixel,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.foreground),XtOffsetOf(XfwfTabsRec,xfwfTabs.foreground),XtRString,(XtPointer)XtDefaultForeground },
#line 31 "Tabs.w"
{XtNorientation,XtCOrientation,XtRTabsOrientation,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.orientation),XtOffsetOf(XfwfTabsRec,xfwfTabs.orientation),XtRImmediate,(XtPointer)XfwfUpTabs },
#line 37 "Tabs.w"
{XtNlefttabs,XtCLefttabs,XtRInt,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.lefttabs),XtOffsetOf(XfwfTabsRec,xfwfTabs.lefttabs),XtRImmediate,(XtPointer)0 },
#line 41 "Tabs.w"
{XtNrighttabs,XtCRighttabs,XtRInt,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.righttabs),XtOffsetOf(XfwfTabsRec,xfwfTabs.righttabs),XtRImmediate,(XtPointer)0 },
#line 55 "Tabs.w"
{XtNlabels,XtCLabels,XtRStringArray,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.labels),XtOffsetOf(XfwfTabsRec,xfwfTabs.labels),XtRImmediate,(XtPointer)NULL },
#line 63 "Tabs.w"
{XtNtabWidthPercentage,XtCTabWidthPercentage,XtRInt,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.tabWidthPercentage),XtOffsetOf(XfwfTabsRec,xfwfTabs.tabWidthPercentage),XtRImmediate,(XtPointer)50 },
#line 69 "Tabs.w"
{XtNcornerwidth,XtCCornerwidth,XtRInt,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.cornerwidth),XtOffsetOf(XfwfTabsRec,xfwfTabs.cornerwidth),XtRImmediate,(XtPointer)3 },
#line 74 "Tabs.w"
{XtNcornerheight,XtCCornerheight,XtRInt,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.cornerheight),XtOffsetOf(XfwfTabsRec,xfwfTabs.cornerheight),XtRImmediate,(XtPointer)3 },
#line 79 "Tabs.w"
{XtNtextmargin,XtCTextmargin,XtRInt,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.textmargin),XtOffsetOf(XfwfTabsRec,xfwfTabs.textmargin),XtRImmediate,(XtPointer)3 },
#line 86 "Tabs.w"
{XtNtabcolor,XtCTabcolor,XtRPixel,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.tabcolor),XtOffsetOf(XfwfTabsRec,xfwfTabs.tabcolor),XtRCallProc,(XtPointer)copy_bg },
#line 90 "Tabs.w"
{XtNfont,XtCFont,XtRFontStruct,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.font),XtOffsetOf(XfwfTabsRec,xfwfTabs.font),XtRString,(XtPointer)XtDefaultFont },
#line 98 "Tabs.w"
{XtNactivate,XtCActivate,XtRCallback,sizeof(((XfwfTabsRec*)NULL)->xfwfTabs.activate),XtOffsetOf(XfwfTabsRec,xfwfTabs.activate),XtRImmediate,(XtPointer)NULL },
#line 102 "Tabs.w"
{XtNtraversalOn,XtCTraversalOn,XtRBoolean,sizeof(((XfwfTabsRec*)NULL)->xfwfCommon.traversalOn),XtOffsetOf(XfwfTabsRec,xfwfCommon.traversalOn),XtRImmediate,(XtPointer)False },
};

XfwfTabsClassRec xfwfTabsClassRec = {
{ /* core_class part */
/* superclass   	*/  (WidgetClass) &xfwfBoardClassRec,
/* class_name   	*/  "XfwfTabs",
/* widget_size  	*/  sizeof(XfwfTabsRec),
/* class_initialize 	*/  class_initialize,
/* class_part_initialize*/  _resolve_inheritance,
/* class_inited 	*/  FALSE,
/* initialize   	*/  initialize,
/* initialize_hook 	*/  NULL,
/* realize      	*/  realize,
/* actions      	*/  actionsList,
/* num_actions  	*/  1,
/* resources    	*/  resources,
/* num_resources 	*/  13,
/* xrm_class    	*/  NULLQUARK,
/* compres_motion 	*/  True ,
/* compress_exposure 	*/  XtExposeCompressMultiple ,
/* compress_enterleave 	*/  True ,
/* visible_interest 	*/  TRUE ,
/* destroy      	*/  destroy,
/* resize       	*/  resize,
/* expose       	*/  expose,
/* set_values   	*/  set_values,
/* set_values_hook 	*/  NULL,
/* set_values_almost 	*/  XtInheritSetValuesAlmost,
/* get_values+hook 	*/  NULL,
/* accept_focus 	*/  XtInheritAcceptFocus,
/* version      	*/  XtVersion,
/* callback_private 	*/  NULL,
/* tm_table      	*/  defaultTranslations,
/* query_geometry 	*/  XtInheritQueryGeometry,
/* display_acceleator 	*/  XtInheritDisplayAccelerator,
/* extension    	*/  NULL 
},
{ /* composite_class part */
XtInheritGeometryManager,
XtInheritChangeManaged,
XtInheritInsertChild,
XtInheritDeleteChild,
NULL
},
{ /* XfwfCommon_class part */
XtInherit_compute_inside,
XtInherit_total_frame_width,
XtInherit_highlight_border,
XtInherit_unhighlight_border,
XtInherit_would_accept_focus,
XtInherit_traverse,
XtInherit_lighter_color,
XtInherit_darker_color,
/* traversal_trans */  NULL ,
},
{ /* XfwfFrame_class part */
 /* dummy */  0
},
{ /* XfwfBoard_class part */
XtInherit_set_abs_location,
},
{ /* XfwfTabs_class part */
border_highlight,
border_unhighlight,
},
};
WidgetClass xfwfTabsWidgetClass = (WidgetClass) &xfwfTabsClassRec;
/*ARGSUSED*/
#line 841 "Tabs.w"
static void activate(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
    int x0, x1, dummy, i, x, y;
    XPoint poly[12];

    switch (((XfwfTabsWidget)self)->xfwfTabs.orientation) {
    case XfwfUpTabs:
    case XfwfDownTabs:
	x = event->xbutton.x;
	comp_hor_tab_shape(self, ((XfwfTabsWidget)self)->xfwfTabs.lefttabs, poly, &x0, &x1, &dummy);
	if (x0 <= x && x < x1) {
	    XtCallCallbackList(self, ((XfwfTabsWidget)self)->xfwfTabs.activate, (XtPointer) 0);
	    return;
	}
	for (i = -1; i >= -((XfwfTabsWidget)self)->xfwfTabs.lefttabs; i--) {
	    comp_hor_tab_shape(self, i + ((XfwfTabsWidget)self)->xfwfTabs.lefttabs, poly, &x0, &x1, &dummy);
	    if (x0 <= x && x < x1) {
		XtCallCallbackList(self, ((XfwfTabsWidget)self)->xfwfTabs.activate, (XtPointer) i);
		return;
	    }
	}
	for (i = 1; i <= ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i++) {
	    comp_hor_tab_shape(self, i + ((XfwfTabsWidget)self)->xfwfTabs.lefttabs, poly, &x0, &x1, &dummy);
	    if (x0 <= x && x < x1) {
		XtCallCallbackList(self, ((XfwfTabsWidget)self)->xfwfTabs.activate, (XtPointer) i);
		return;
	    }
	}
	break;
    case XfwfLeftTabs:
    case XfwfRightTabs:
	y = event->xbutton.y;
	comp_ver_tab_shape(self, ((XfwfTabsWidget)self)->xfwfTabs.lefttabs, poly, &x0, &x1, &dummy);
	if (x0 <= y && y < x1) {
	    XtCallCallbackList(self, ((XfwfTabsWidget)self)->xfwfTabs.activate, (XtPointer) 0);
	    return;
	}
	for (i = -1; i >= -((XfwfTabsWidget)self)->xfwfTabs.lefttabs; i--) {
	    comp_ver_tab_shape(self, i + ((XfwfTabsWidget)self)->xfwfTabs.lefttabs, poly, &x0, &x1, &dummy);
	    if (x0 <= y && y < x1) {
		XtCallCallbackList(self, ((XfwfTabsWidget)self)->xfwfTabs.activate, (XtPointer) i);
		return;
	    }
	}
	for (i = 1; i <= ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i++) {
	    comp_ver_tab_shape(self, i + ((XfwfTabsWidget)self)->xfwfTabs.lefttabs, poly, &x0, &x1, &dummy);
	    if (x0 <= y && y < x1) {
		XtCallCallbackList(self, ((XfwfTabsWidget)self)->xfwfTabs.activate, (XtPointer) i);
		return;
	    }
	}
	break;
    }
}

static void _resolve_inheritance(class)
WidgetClass class;
{
  XfwfTabsWidgetClass c = (XfwfTabsWidgetClass) class;
  XfwfTabsWidgetClass super;
  static CompositeClassExtensionRec extension_rec = {
    NULL, NULLQUARK, XtCompositeExtensionVersion,
    sizeof(CompositeClassExtensionRec), True};
  CompositeClassExtensionRec *ext;
  ext = (XtPointer)XtMalloc(sizeof(*ext));
  *ext = extension_rec;
  ext->next_extension = c->composite_class.extension;
  c->composite_class.extension = ext;
  if (class == xfwfTabsWidgetClass) return;
  super = (XfwfTabsWidgetClass)class->core_class.superclass;
  if (c->xfwfTabs_class.border_highlight == XtInherit_border_highlight)
    c->xfwfTabs_class.border_highlight = super->xfwfTabs_class.border_highlight;
  if (c->xfwfTabs_class.border_unhighlight == XtInherit_border_unhighlight)
    c->xfwfTabs_class.border_unhighlight = super->xfwfTabs_class.border_unhighlight;
}
#line 151 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 151 "Tabs.w"
static void class_initialize(void)
#else
#line 151 "Tabs.w"
static void class_initialize()
#endif
#line 152 "Tabs.w"
{
    XtSetTypeConverter(XtRString, "StringArray",
		       cvtStringToStringArray,
		       NULL, 0, XtCacheNone, NULL);
    XtSetTypeConverter(XtRString, "TabsOrientation",
		       cvtStringToTabsOrientation,
		       NULL, 0, XtCacheNone, NULL);
    XtSetTypeConverter("TabsOrientation", XtRString,
		       cvtTabsOrientationToString,
		       NULL, 0, XtCacheNone, NULL);
}
#line 170 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 170 "Tabs.w"
static void initialize(Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 170 "Tabs.w"
static void initialize(request,self,args,num_args)Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 171 "Tabs.w"
{
    String *h;
    int i;

    ((XfwfTabsWidget)self)->xfwfCommon.traversalOn = FALSE;
    ((XfwfTabsWidget)self)->xfwfTabs.topgc = NULL;
    create_topgc(self);
    ((XfwfTabsWidget)self)->xfwfTabs.bottomgc = NULL;
    create_bottomgc(self);
    ((XfwfTabsWidget)self)->xfwfTabs.textgc = NULL;
    create_textgc(self);
    ((XfwfTabsWidget)self)->xfwfTabs.fillgc = NULL;
    create_fillgc(self);
    ((XfwfTabsWidget)self)->xfwfTabs.backgc = NULL;
    create_backgc(self);
    if (((XfwfTabsWidget)self)->xfwfTabs.labels) {
	h = (String*) XtMalloc((((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs + 1) * sizeof(*h));
	for (i = ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i >= 0; i--)
	    h[i] = XtNewString(((XfwfTabsWidget)self)->xfwfTabs.labels[i]);
	((XfwfTabsWidget)self)->xfwfTabs.labels = h;
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage < 0 || ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage > 100) {
	XtAppWarning(XtWidgetToApplicationContext(self),
		     "tabWidthPercentage out of range; reset to 50");
	((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage = 50;
    }
    ((XfwfTabsWidget)self)->xfwfTabs.offsets = NULL;
    ((XfwfTabsWidget)self)->xfwfTabs.tabwidths = NULL;
    compute_tabsizes(self);
}
#line 205 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 205 "Tabs.w"
static Boolean  set_values(Widget  old,Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 205 "Tabs.w"
static Boolean  set_values(old,request,self,args,num_args)Widget  old;Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 206 "Tabs.w"
{
    Bool redraw = FALSE, resize_labels = FALSE;
    String *h;
    int i;

    if (((XfwfTabsWidget)self)->core.background_pixel != ((XfwfTabsWidget)old)->core.background_pixel
	|| ((XfwfTabsWidget)self)->core.background_pixmap != ((XfwfTabsWidget)old)->core.background_pixmap
	|| ((XfwfTabsWidget)self)->xfwfFrame.frameWidth != ((XfwfTabsWidget)old)->xfwfFrame.frameWidth) {
	create_topgc(self);
	create_bottomgc(self);
	create_backgc(self);
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.foreground != ((XfwfTabsWidget)old)->xfwfTabs.foreground || ((XfwfTabsWidget)self)->xfwfTabs.font != ((XfwfTabsWidget)old)->xfwfTabs.font) {
	create_textgc(self);
	redraw = TRUE;
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.tabcolor != ((XfwfTabsWidget)old)->xfwfTabs.tabcolor) {
	create_fillgc(self);
	redraw = TRUE;
    }
    if ((((XfwfTabsWidget)self)->xfwfTabs.textmargin != ((XfwfTabsWidget)old)->xfwfTabs.textmargin && ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage == 0)
	|| ((XfwfTabsWidget)self)->xfwfTabs.cornerwidth != ((XfwfTabsWidget)old)->xfwfTabs.cornerwidth
	|| ((XfwfTabsWidget)self)->xfwfTabs.cornerheight != ((XfwfTabsWidget)old)->xfwfTabs.cornerheight) {
	resize_labels = TRUE;
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.labels != ((XfwfTabsWidget)old)->xfwfTabs.labels) {
	if (((XfwfTabsWidget)self)->xfwfTabs.labels) {
	    h = (String*) XtMalloc((((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs + 1) * sizeof(*h));
	    for (i = ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i >= 0; i--)
		h[i] = XtNewString(((XfwfTabsWidget)self)->xfwfTabs.labels[i]);
	    ((XfwfTabsWidget)self)->xfwfTabs.labels = h;
	}
	if (((XfwfTabsWidget)old)->xfwfTabs.labels) {
	    for (i = ((XfwfTabsWidget)old)->xfwfTabs.lefttabs + ((XfwfTabsWidget)old)->xfwfTabs.righttabs; i >= 0; i--)
		XtFree(((XfwfTabsWidget)old)->xfwfTabs.labels[i]);
	    XtFree((XtPointer) ((XfwfTabsWidget)old)->xfwfTabs.labels);
	}
	resize_labels = TRUE;
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage < 0 || ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage > 100) {
	XtAppWarning(XtWidgetToApplicationContext(self),
		     "tabWidthPercentage out of range; reset to 50");
	((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage = 50;
    }
    if (((XfwfTabsWidget)old)->xfwfTabs.tabWidthPercentage != ((XfwfTabsWidget)self)->xfwfTabs.tabWidthPercentage)
	resize_labels = TRUE;
    if (((XfwfTabsWidget)self)->xfwfTabs.lefttabs != ((XfwfTabsWidget)old)->xfwfTabs.lefttabs || ((XfwfTabsWidget)self)->xfwfTabs.righttabs != ((XfwfTabsWidget)old)->xfwfTabs.righttabs)
	redraw = TRUE;
    if (resize_labels) {
	compute_tabsizes(self);
	redraw = TRUE;
    }
    return redraw;
}
#line 264 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 264 "Tabs.w"
static void realize(Widget self,XtValueMask * mask,XSetWindowAttributes * attributes)
#else
#line 264 "Tabs.w"
static void realize(self,mask,attributes)Widget self;XtValueMask * mask;XSetWindowAttributes * attributes;
#endif
#line 265 "Tabs.w"
{
    *mask |= CWBitGravity;
    attributes->bit_gravity = ForgetGravity;
    xfwfBoardClassRec.core_class.realize(self, mask, attributes);
    set_shape(self);
}
#line 272 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 272 "Tabs.w"
static void resize(Widget self)
#else
#line 272 "Tabs.w"
static void resize(self)Widget self;
#endif
#line 273 "Tabs.w"
{
    if (XtIsRealized(self))
	XClearArea(XtDisplay(self), XtWindow(self), 0, 0, 0, 0, True);
    compute_tabsizes(self);
    set_shape(self);
    xfwfBoardClassRec.core_class.resize(self);
}
#line 287 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 287 "Tabs.w"
static void expose(Widget self,XEvent * event,Region  region)
#else
#line 287 "Tabs.w"
static void expose(self,event,region)Widget self;XEvent * event;Region  region;
#endif
#line 288 "Tabs.w"
{
    int i;

    if (! XtIsRealized(self)) return;

    switch (((XfwfTabsWidget)self)->xfwfTabs.orientation) {
    case XfwfUpTabs:
    case XfwfDownTabs:
	for (i = 0; i < ((XfwfTabsWidget)self)->xfwfTabs.lefttabs; i++)
	    draw_hor_tab(self, region, i);
	for (i = ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i > ((XfwfTabsWidget)self)->xfwfTabs.lefttabs; i--)
	    draw_hor_tab(self, region, i);
	draw_hor_tab(self, region, ((XfwfTabsWidget)self)->xfwfTabs.lefttabs);
	break;
    case XfwfLeftTabs:
    case XfwfRightTabs:
	for (i = 0; i < ((XfwfTabsWidget)self)->xfwfTabs.lefttabs; i++)
	    draw_ver_tab(self, region, i);
	for (i = ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i > ((XfwfTabsWidget)self)->xfwfTabs.lefttabs; i--)
	    draw_ver_tab(self, region, i);
	draw_ver_tab(self, region, ((XfwfTabsWidget)self)->xfwfTabs.lefttabs);
	break;
    }
    /* Focus highlight? */
}
#line 317 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 317 "Tabs.w"
static void border_highlight(void)
#else
#line 317 "Tabs.w"
static void border_highlight()
#endif
#line 318 "Tabs.w"
{
}
#line 321 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 321 "Tabs.w"
static void border_unhighlight(void)
#else
#line 321 "Tabs.w"
static void border_unhighlight()
#endif
#line 322 "Tabs.w"
{
}
#line 327 "Tabs.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 327 "Tabs.w"
static void destroy(Widget self)
#else
#line 327 "Tabs.w"
static void destroy(self)Widget self;
#endif
#line 328 "Tabs.w"
{
    int i;

    if (((XfwfTabsWidget)self)->xfwfTabs.labels) {
	for (i = ((XfwfTabsWidget)self)->xfwfTabs.lefttabs + ((XfwfTabsWidget)self)->xfwfTabs.righttabs; i >= 0; i--)
	    XtFree(((XfwfTabsWidget)self)->xfwfTabs.labels[i]);
	XtFree((XtPointer) ((XfwfTabsWidget)self)->xfwfTabs.labels);
    }
    if (((XfwfTabsWidget)self)->xfwfTabs.offsets)
	XtFree((XtPointer) ((XfwfTabsWidget)self)->xfwfTabs.offsets);
    if (((XfwfTabsWidget)self)->xfwfTabs.tabwidths)
	XtFree((XtPointer) ((XfwfTabsWidget)self)->xfwfTabs.tabwidths);
}
#line 106 "Tabs.w"

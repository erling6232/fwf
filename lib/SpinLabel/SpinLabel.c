/* Generated by wbuild from "SpinLabel.w"
** (generator version $Revision$ of $Date$)
*/
#if HAVE_CONFIG_H
#  include <config.h>
#endif

#include <X11/IntrinsicP.h>
#include <X11/StringDefs.h>
#line 330 "SpinLabel.w"
#include <stdio.h>
#line 331 "SpinLabel.w"
#include <Xfwf/Arrow.h>
#line 332 "SpinLabel.w"
#include <Xfwf/Label.h>
#include <Xfwf/SpinLabelP.h>
#line 295 "SpinLabel.w"
static void first(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 303 "SpinLabel.w"
static void prev(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 312 "SpinLabel.w"
static void next(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 322 "SpinLabel.w"
static void last(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);

static XtActionsRec actionsList[] = {
{"first", first},
{"prev", prev},
{"next", next},
{"last", last},
};

static char defaultTranslations[] = "\
<Btn1Down>: traverseCurrent() \n\
~Shift<Key>Tab: traverseNext() \n\
Shift<Key>Tab: traversePrev() \n\
<Key>Home: first() \n\
Ctrl<Key>a: first() \n\
<Key>Left: prev() \n\
<Key>Down: prev() \n\
<Key>KP_Subtract: prev() \n\
<Key>minus: prev() \n\
Ctrl<Key>p: prev() \n\
Ctrl<Key>b: prev() \n\
<Key>Up: next() \n\
<Key>Right: next() \n\
Ctrl<Key>n: next() \n\
Ctrl<Key>f: next() \n\
<Key>plus: next() \n\
<Key>KP_Add: next() \n\
<Key>End: last() \n\
Ctrl<Key>e: last() \n\
";
static void _resolve_inheritance(
#if NeedFunctionPrototypes
WidgetClass
#endif
);
#line 93 "SpinLabel.w"
static void initialize(
#if NeedFunctionPrototypes
Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 118 "SpinLabel.w"
static void resize(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 124 "SpinLabel.w"
static Boolean  set_values(
#if NeedFunctionPrototypes
Widget ,Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 188 "SpinLabel.w"
static void arrow_prev(
#if NeedFunctionPrototypes
Widget ,XtPointer ,XtPointer 
#endif
);
#line 195 "SpinLabel.w"
static void arrow_next(
#if NeedFunctionPrototypes
Widget ,XtPointer ,XtPointer 
#endif
);
#line 205 "SpinLabel.w"
static void copy_background(
#if NeedFunctionPrototypes
Widget,int ,XrmValue *
#endif
);
#line 213 "SpinLabel.w"
static void set_geometry(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 188 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 188 "SpinLabel.w"
static void arrow_prev(Widget  w,XtPointer  client_data,XtPointer  call_data)
#else
#line 188 "SpinLabel.w"
static void arrow_prev(w,client_data,call_data)Widget  w;XtPointer  client_data;XtPointer  call_data;
#endif
#line 189 "SpinLabel.w"
{
	Widget self = (Widget) client_data;
	
	XtCallCallbackList(w,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.callback,(XtPointer) XfwfPrev);
}
#line 195 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 195 "SpinLabel.w"
static void arrow_next(Widget  w,XtPointer  client_data,XtPointer  call_data)
#else
#line 195 "SpinLabel.w"
static void arrow_next(w,client_data,call_data)Widget  w;XtPointer  client_data;XtPointer  call_data;
#endif
#line 196 "SpinLabel.w"
{
	Widget self = (Widget) client_data;
	
	XtCallCallbackList(w,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.callback,(XtPointer) XfwfNext);
}
#line 205 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 205 "SpinLabel.w"
static void copy_background(Widget self,int  offset,XrmValue * value)
#else
#line 205 "SpinLabel.w"
static void copy_background(self,offset,value)Widget self;int  offset;XrmValue * value;
#endif
#line 206 "SpinLabel.w"
{
    value->addr = (XtPointer) &((XfwfSpinLabelWidget)self)->core.background_pixel;
}
#line 213 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 213 "SpinLabel.w"
static void set_geometry(Widget self)
#else
#line 213 "SpinLabel.w"
static void set_geometry(self)Widget self;
#endif
#line 214 "SpinLabel.w"
{
	Position x,y,xa1,xa2,xl,yl,ya1,ya2;
	Dimension w,h,wa,ha,wl,hl;
	
	((XfwfSpinLabelWidgetClass)self->core.widget_class)->xfwfCommon_class.compute_inside(self,&x,&y,&w,&h);
	
	if(((XfwfSpinLabelWidget)self)->xfwfSpinLabel.horizontal)
	{
		hl=h;
		ha=wa=h-4;	/* 2*$frameWidth; */
		wl=w-(2*ha)-2;	/* $frameWidth; */
		yl=y;
		ya1=ya2=y+2;	/* $frameWidth; */
		
		if(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment == XfwfLeft)
		{
			 xl=x;	xa1=wl+4; /* 2*$frameWidth;*/	xa2=xa1+wa;
		}
		else if(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment == XfwfRight)
		{
			xa1=x;	xa2=wa+2; /* $frameWidth; */	xl=2*xa2;
		}
		else
		{
			if(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment != XfwfCenter)
			{
				XtWarning("SpinLabel.alignment: illegal value. using center");
				((XfwfSpinLabelWidget)self)->xfwfLabel.alignment=XfwfCenter;
			}
			xa1=x+2; /*$frameWidth;*/	xl=wa+4; /* 2*($frameWidth+$labelframeWidth); */
			xa2=xl+wl;
		}
	}
	else		/* vertical */	
	{
		if(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment == XfwfLeft)
		{
			hl=h;	ha=h/2-1;
			wa=ha+4; /* 2*$frameWidth;*/	wl=w-wa-2;
			xl=x;	xa1=xa2=wl+2; /* $frameWidth; */
			yl=ya2=y;
			ya1=ha+6;	/* 2+2*$frameWidth; */
		}
		else if(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment == XfwfRight)
		{
			hl=h;	ha=h/2-1;
			wa=ha+4; /* 2*$frameWidth;*/	wl=w-wa-2;
			xl=wa+4; /* 2*$frameWidth;*/	xa1=xa2=x;
			yl=ya2=y;
			ya1=ha+4; /* 2+2*$frameWidth; */
		}
		else
		{
			if(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment != XfwfCenter)
			{
				XtWarning("SpinLabel.alignment: illegal value. using center");
				((XfwfSpinLabelWidget)self)->xfwfLabel.alignment=XfwfCenter;
			}
			hl=ha=h/3;	wl=wa=w;
			xl=xa1=xa2=x;
			ya2=y;	yl=ya2+ha;	ya1=yl+hl;
		}
	}

#ifdef DEBUG	
	fprintf(stderr,"spin.resize(%s %dx%d @%d,%d)\n",XtName(self),w,h,x,y);
	fprintf(stderr,"\t[arrow1 %dx%d @%d,%d]\n",wa,ha,xa1,ya1);
	fprintf(stderr,"\t[label  %dx%d @%d,%d]\n",wl,hl,xl,yl);
	fprintf(stderr,"\t[arrow2 %dx%d @%d,%d]\n",wa,ha,xa2,ya2);
#endif

	XtConfigureWidget(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[0],xa1,ya1,wa,ha,0);
	XtConfigureWidget(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[1],xl,yl,wl,hl,0);
	XtConfigureWidget(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[2],xa2,ya2,wa,ha,0);
}

static XtResource resources[] = {
#line 25 "SpinLabel.w"
{XtNarrowForeground,XtCArrowForeground,XtRPixel,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfSpinLabel.arrowForeground),XtOffsetOf(XfwfSpinLabelRec,xfwfSpinLabel.arrowForeground),XtRCallProc,(XtPointer)copy_background },
#line 33 "SpinLabel.w"
{XtNcallback,XtCCallback,XtRCallback,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfSpinLabel.callback),XtOffsetOf(XfwfSpinLabelRec,xfwfSpinLabel.callback),XtRImmediate,(XtPointer)NULL },
#line 39 "SpinLabel.w"
{XtNtraversalOn,XtCTraversalOn,XtRBoolean,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfCommon.traversalOn),XtOffsetOf(XfwfSpinLabelRec,xfwfCommon.traversalOn),XtRImmediate,(XtPointer)True },
#line 43 "SpinLabel.w"
{XtNframeWidth,XtCFrameWidth,XtRDimension,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfFrame.frameWidth),XtOffsetOf(XfwfSpinLabelRec,xfwfFrame.frameWidth),XtRImmediate,(XtPointer)0 },
#line 47 "SpinLabel.w"
{XtNframeType,XtCFrameType,XtRFrameType,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfFrame.frameType),XtOffsetOf(XfwfSpinLabelRec,xfwfFrame.frameType),XtRImmediate,(XtPointer)XfwfChiseled },
#line 52 "SpinLabel.w"
{XtNlabelframeWidth,XtCLabelframeWidth,XtRDimension,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfSpinLabel.labelframeWidth),XtOffsetOf(XfwfSpinLabelRec,xfwfSpinLabel.labelframeWidth),XtRImmediate,(XtPointer)0 },
#line 57 "SpinLabel.w"
{XtNlabelframeType,XtCLabelframeType,XtRFrameType,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfSpinLabel.labelframeType),XtOffsetOf(XfwfSpinLabelRec,xfwfSpinLabel.labelframeType),XtRImmediate,(XtPointer)XfwfSunken },
#line 63 "SpinLabel.w"
{XtNhorizontal,XtCHorizontal,XtRBoolean,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfSpinLabel.horizontal),XtOffsetOf(XfwfSpinLabelRec,xfwfSpinLabel.horizontal),XtRImmediate,(XtPointer)True },
#line 70 "SpinLabel.w"
{XtNalignment,XtCAlignment,XtRAlignment,sizeof(((XfwfSpinLabelRec*)NULL)->xfwfLabel.alignment),XtOffsetOf(XfwfSpinLabelRec,xfwfLabel.alignment),XtRImmediate,(XtPointer)XfwfCenter },
};

XfwfSpinLabelClassRec xfwfSpinLabelClassRec = {
{ /* core_class part */
/* superclass   	*/  (WidgetClass) &xfwfLabelClassRec,
/* class_name   	*/  "XfwfSpinLabel",
/* widget_size  	*/  sizeof(XfwfSpinLabelRec),
/* class_initialize 	*/  NULL,
/* class_part_initialize*/  _resolve_inheritance,
/* class_inited 	*/  FALSE,
/* initialize   	*/  initialize,
/* initialize_hook 	*/  NULL,
/* realize      	*/  XtInheritRealize,
/* actions      	*/  actionsList,
/* num_actions  	*/  4,
/* resources    	*/  resources,
/* num_resources 	*/  9,
/* xrm_class    	*/  NULLQUARK,
/* compres_motion 	*/  True ,
/* compress_exposure 	*/  XtExposeCompressMultiple ,
/* compress_enterleave 	*/  True ,
/* visible_interest 	*/  TRUE ,
/* destroy      	*/  NULL,
/* resize       	*/  resize,
/* expose       	*/  XtInheritExpose,
/* set_values   	*/  set_values,
/* set_values_hook 	*/  NULL,
/* set_values_almost 	*/  XtInheritSetValuesAlmost,
/* get_values+hook 	*/  NULL,
/* accept_focus 	*/  XtInheritAcceptFocus,
/* version      	*/  XtVersion,
/* callback_private 	*/  NULL,
/* tm_table      	*/  defaultTranslations,
/* query_geometry 	*/  XtInheritQueryGeometry,
/* display_acceleator 	*/  XtInheritDisplayAccelerator,
/* extension    	*/  NULL 
},
{ /* composite_class part */
XtInheritGeometryManager,
XtInheritChangeManaged,
XtInheritInsertChild,
XtInheritDeleteChild,
NULL
},
{ /* XfwfCommon_class part */
XtInherit_compute_inside,
XtInherit_total_frame_width,
XtInherit_highlight_border,
XtInherit_unhighlight_border,
XtInherit_would_accept_focus,
XtInherit_traverse,
XtInherit_lighter_color,
XtInherit_darker_color,
/* traversal_trans */  NULL ,
},
{ /* XfwfFrame_class part */
 /* dummy */  0
},
{ /* XfwfBoard_class part */
XtInherit_set_abs_location,
},
{ /* XfwfLabel_class part */
XtInherit_set_label,
},
{ /* XfwfSpinLabel_class part */
 /* dummy */  0
},
};
WidgetClass xfwfSpinLabelWidgetClass = (WidgetClass) &xfwfSpinLabelClassRec;
/*ARGSUSED*/
#line 295 "SpinLabel.w"
static void first(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
	XtCallCallbackList(self,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.callback,(XtPointer) XfwfFirst);
}

/*ARGSUSED*/
#line 303 "SpinLabel.w"
static void prev(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
	XtCallCallbackList(self,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.callback,(XtPointer) XfwfPrev);
}

/*ARGSUSED*/
#line 312 "SpinLabel.w"
static void next(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
	XtCallCallbackList(self,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.callback,(XtPointer) XfwfNext);
}

/*ARGSUSED*/
#line 322 "SpinLabel.w"
static void last(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
	XtCallCallbackList(self,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.callback,(XtPointer) XfwfLast);
}

static void _resolve_inheritance(class)
WidgetClass class;
{
  XfwfSpinLabelWidgetClass c = (XfwfSpinLabelWidgetClass) class;
  XfwfSpinLabelWidgetClass super;
  static CompositeClassExtensionRec extension_rec = {
    NULL, NULLQUARK, XtCompositeExtensionVersion,
    sizeof(CompositeClassExtensionRec), True};
  CompositeClassExtensionRec *ext;
  ext = (XtPointer)XtMalloc(sizeof(*ext));
  *ext = extension_rec;
  ext->next_extension = c->composite_class.extension;
  c->composite_class.extension = ext;
  if (class == xfwfSpinLabelWidgetClass) return;
  super = (XfwfSpinLabelWidgetClass)class->core_class.superclass;
}
#line 93 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 93 "SpinLabel.w"
static void initialize(Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 93 "SpinLabel.w"
static void initialize(request,self,args,num_args)Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 94 "SpinLabel.w"
{
	Bool vert;

	vert=(((XfwfSpinLabelWidget)self)->xfwfLabel.alignment == XfwfCenter && ((XfwfSpinLabelWidget)self)->xfwfSpinLabel.horizontal ? True : False);
			
	((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[0]=XtVaCreateWidget("_arrow1",xfwfArrowWidgetClass,self,
			XtNframeWidth,0,XtNforeground,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.arrowForeground,
			XtNtraversalOn, False, XtNhighlightThickness, 0,  
			XtNdirection, vert ? XfwfLeft : XfwfBottom,NULL);
	XtAddCallback(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[0],XtNcallback,arrow_prev,self);
		
	((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[1]=XtVaCreateWidget("_label",xfwfLabelWidgetClass,self,
			XtNframeWidth,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.labelframeWidth,XtNframeType,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.labelframeType,
			XtNlabel,((XfwfSpinLabelWidget)self)->xfwfLabel.label,NULL);
	
	((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[2]=XtVaCreateWidget("_arrow2",xfwfArrowWidgetClass,self,
			XtNframeWidth,0,XtNforeground,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.arrowForeground,
			XtNtraversalOn, False, XtNhighlightThickness, 0,
			XtNdirection, vert ? XfwfRight : XfwfTop,NULL);
	XtAddCallback(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[2],XtNcallback,arrow_next,self);
	set_geometry(self);
	XtManageChildren(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child,3);
}
#line 118 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 118 "SpinLabel.w"
static void resize(Widget self)
#else
#line 118 "SpinLabel.w"
static void resize(self)Widget self;
#endif
#line 119 "SpinLabel.w"
{
	set_geometry(self);
}
#line 124 "SpinLabel.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 124 "SpinLabel.w"
static Boolean  set_values(Widget  old,Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 124 "SpinLabel.w"
static Boolean  set_values(old,request,self,args,num_args)Widget  old;Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 125 "SpinLabel.w"
{
	Bool redisplay=False;

#ifdef DEBUG	
	fprintf(stderr,"set_values(%s)\n",XtName(self));
#endif
	
	((XfwfSpinLabelWidgetClass)self->core.widget_class)->xfwfLabel_class.set_label(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[1],((XfwfSpinLabelWidget)self)->xfwfLabel.label);

	if(((XfwfSpinLabelWidget)old)->xfwfLabel.alignment != ((XfwfSpinLabelWidget)self)->xfwfLabel.alignment)
		redisplay=True;

	if(((XfwfSpinLabelWidget)old)->xfwfSpinLabel.horizontal != ((XfwfSpinLabelWidget)self)->xfwfSpinLabel.horizontal)
		redisplay=True;

	if(redisplay)
		set_geometry(self);
	
	if(((XfwfSpinLabelWidget)old)->xfwfSpinLabel.arrowForeground != ((XfwfSpinLabelWidget)self)->xfwfSpinLabel.arrowForeground)
	{
		XtVaSetValues(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[0],XtNforeground,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.arrowForeground,NULL);
		XtVaSetValues(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[2],XtNforeground,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.arrowForeground,NULL);
	}

	 if(((XfwfSpinLabelWidget)old)->xfwfSpinLabel.labelframeType != ((XfwfSpinLabelWidget)self)->xfwfSpinLabel.labelframeType)
		XtVaSetValues(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[1],XtNframeType,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.labelframeType,NULL);

	if(((XfwfSpinLabelWidget)old)->xfwfSpinLabel.labelframeWidth != ((XfwfSpinLabelWidget)self)->xfwfSpinLabel.labelframeWidth)
		XtVaSetValues(((XfwfSpinLabelWidget)self)->xfwfSpinLabel._child[1],XtNframeWidth,((XfwfSpinLabelWidget)self)->xfwfSpinLabel.labelframeWidth,NULL);

	return redisplay;
}
#line 78 "SpinLabel.w"

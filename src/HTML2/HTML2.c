/* Generated by wbuild from "HTML2.w"
** (generator version $Revision$ of $Date$)
*/
#include <X11/IntrinsicP.h>
#include <X11/StringDefs.h>
#line 1197 "HTML2.w"
#include <stdio.h>
#line 1198 "HTML2.w"
#include <assert.h>
#line 1199 "HTML2.w"
#include <ctype.h>
#line 1200 "HTML2.w"
#include <X11/Xmu/CharSet.h>
#line 1201 "HTML2.w"
#include <Xm/ToggleB.h>
#line 1202 "HTML2.w"
#include <Xm/TextF.h>
#line 1203 "HTML2.w"
#include <Xm/PushB.h>
#line 1204 "HTML2.w"
#include <Xm/Text.h>
#line 1205 "HTML2.w"
#include <Xm/List.h>
#include <Xfwf/HTML2P.h>

static char defaultTranslations[] = "\
<Btn1Down>,<Btn1Up>: activate() \n\
<Motion>: motion() \n\
";
static void _resolve_inheritance(
#if NeedFunctionPrototypes
WidgetClass
#endif
);
#line 84 "HTML2.w"
static void class_initialize(
#if NeedFunctionPrototypes
void
#endif
);
#line 90 "HTML2.w"
static void initialize(
#if NeedFunctionPrototypes
Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 103 "HTML2.w"
static Boolean  set_values(
#if NeedFunctionPrototypes
Widget ,Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 116 "HTML2.w"
static Bool  get_entity(
#if NeedFunctionPrototypes
Widget,const  String ,Cardinal ,char  val[],Cardinal ,int *
#endif
);
#line 140 "HTML2.w"
static void add_starttag(
#if NeedFunctionPrototypes
Widget,const  String ,Cardinal ,Attrib 
#endif
);
#line 319 "HTML2.w"
static void pop_style(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 343 "HTML2.w"
static void make_child_from_source(
#if NeedFunctionPrototypes
Widget,Widget ,const  String 
#endif
);
#line 354 "HTML2.w"
static void destroy(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 394 "HTML2.w"
#define new(p) ((p )=(XtPointer )XtMalloc (sizeof (*(p ))))


#line 395 "HTML2.w"
#define dispose(p) (XtFree ((String )p ),(p )=NULL )


#line 396 "HTML2.w"
#define newarray(p, n) ((p )=(XtPointer )XtMalloc ((n )*sizeof (*(p ))))


#line 397 "HTML2.w"
#define renewarray(p, n) ((p )=(XtPointer )XtRealloc ((String )p ,(n )*sizeof (*(p ))))


#line 398 "HTML2.w"
#define min(a, b) ((a )<(b )?(a ):(b ))


#line 399 "HTML2.w"
#define max(a, b) ((a )>(b )?(a ):(b ))


#line 400 "HTML2.w"
#define round(f) ((int )((f )+0.5 ))


#line 401 "HTML2.w"
#define set_max(a, b) if ((a )>=(b ));else (a )=(b )


#line 402 "HTML2.w"
#define set_min(a, b) if ((a )<=(b ));else (a )=(b )


#line 408 "HTML2.w"
typedef struct {
	    XrmQuark q;				/* The name as a quark */
	    String name;			/* The name, without "&;" */
	    String value;			/* Replacement text */
	    int charset;			/* Charset or SYSTEM_DATA */
	} EntityRec;
#line 414 "HTML2.w"
static EntityRec  iconentities[] = {
	    {0, "folder",	"A", WWW_ICONS},
	    {0, "text.document",	"B", WWW_ICONS},
	    /* ... */
	    {0, "sbsp",		"sbsp",	SYSTEM_DATA},/* Soft break space */
	};
#line 421 "HTML2.w"
static void init_iconentities(
#if NeedFunctionPrototypes
void
#endif
);
#line 431 "HTML2.w"
static XrmQuark  ABBREV_T;
#line 432 "HTML2.w"
static XrmQuark  ABSTRACT_T;
#line 433 "HTML2.w"
static XrmQuark  ACRONYM_T;
#line 434 "HTML2.w"
static XrmQuark  ADDRESS_T;
#line 435 "HTML2.w"
static XrmQuark  AU_T;
#line 436 "HTML2.w"
static XrmQuark  A_T;
#line 437 "HTML2.w"
static XrmQuark  BASE_T;
#line 438 "HTML2.w"
static XrmQuark  BIG_T;
#line 439 "HTML2.w"
static XrmQuark  BLOCKQUOTE_T;
#line 440 "HTML2.w"
static XrmQuark  BODY_T;
#line 441 "HTML2.w"
static XrmQuark  BQ_T;
#line 442 "HTML2.w"
static XrmQuark  BR_T;
#line 443 "HTML2.w"
static XrmQuark  B_T;
#line 444 "HTML2.w"
static XrmQuark  CAPTION_T;
#line 445 "HTML2.w"
static XrmQuark  CHANGED_T;
#line 446 "HTML2.w"
static XrmQuark  CITE_T;
#line 447 "HTML2.w"
static XrmQuark  CODE_T;
#line 448 "HTML2.w"
static XrmQuark  DD_T;
#line 449 "HTML2.w"
static XrmQuark  DEL_T;
#line 450 "HTML2.w"
static XrmQuark  DFN_T;
#line 451 "HTML2.w"
static XrmQuark  DIR_T;
#line 452 "HTML2.w"
static XrmQuark  DISPLAY_T;
#line 453 "HTML2.w"
static XrmQuark  DIV_T;
#line 454 "HTML2.w"
static XrmQuark  DL_T;
#line 455 "HTML2.w"
static XrmQuark  DT_T;
#line 456 "HTML2.w"
static XrmQuark  EM_T;
#line 457 "HTML2.w"
static XrmQuark  FIG_T;
#line 458 "HTML2.w"
static XrmQuark  FOOTNOTE_T;
#line 459 "HTML2.w"
static XrmQuark  FORM_T;
#line 460 "HTML2.w"
static XrmQuark  H1_T;
#line 461 "HTML2.w"
static XrmQuark  H2_T;
#line 462 "HTML2.w"
static XrmQuark  H3_T;
#line 463 "HTML2.w"
static XrmQuark  H4_T;
#line 464 "HTML2.w"
static XrmQuark  H5_T;
#line 465 "HTML2.w"
static XrmQuark  H6_T;
#line 466 "HTML2.w"
static XrmQuark  HEAD_T;
#line 467 "HTML2.w"
static XrmQuark  HR_T;
#line 468 "HTML2.w"
static XrmQuark  HTML_T;
#line 469 "HTML2.w"
static XrmQuark  IMG_T;
#line 470 "HTML2.w"
static XrmQuark  INPUT_T;
#line 471 "HTML2.w"
static XrmQuark  INS_T;
#line 472 "HTML2.w"
static XrmQuark  ISINDEX_T;
#line 473 "HTML2.w"
static XrmQuark  I_T;
#line 474 "HTML2.w"
static XrmQuark  KBD_T;
#line 475 "HTML2.w"
static XrmQuark  KEY_T;
#line 476 "HTML2.w"
static XrmQuark  LANG_T;
#line 477 "HTML2.w"
static XrmQuark  LINK_T;
#line 478 "HTML2.w"
static XrmQuark  LI_T;
#line 479 "HTML2.w"
static XrmQuark  MARGIN_T;
#line 480 "HTML2.w"
static XrmQuark  MATH_T;
#line 481 "HTML2.w"
static XrmQuark  MENU_T;
#line 482 "HTML2.w"
static XrmQuark  META_T;
#line 483 "HTML2.w"
static XrmQuark  NOTE_T;
#line 484 "HTML2.w"
static XrmQuark  OL_T;
#line 485 "HTML2.w"
static XrmQuark  OPTION_T;
#line 486 "HTML2.w"
static XrmQuark  PCDATA_T;
#line 487 "HTML2.w"
static XrmQuark  PERSON_T;
#line 488 "HTML2.w"
static XrmQuark  PRE_T;
#line 489 "HTML2.w"
static XrmQuark  P_T;
#line 490 "HTML2.w"
static XrmQuark  QUOTE_T;
#line 491 "HTML2.w"
static XrmQuark  Q_T;
#line 492 "HTML2.w"
static XrmQuark  SAMP_T;
#line 493 "HTML2.w"
static XrmQuark  SELECT_T;
#line 494 "HTML2.w"
static XrmQuark  SMALL_T;
#line 495 "HTML2.w"
static XrmQuark  STRONG_T;
#line 496 "HTML2.w"
static XrmQuark  STYLE_T;
#line 497 "HTML2.w"
static XrmQuark  SUB_T;
#line 498 "HTML2.w"
static XrmQuark  SUP_T;
#line 499 "HTML2.w"
static XrmQuark  S_T;
#line 500 "HTML2.w"
static XrmQuark  TABLE_T;
#line 501 "HTML2.w"
static XrmQuark  TAB_T;
#line 502 "HTML2.w"
static XrmQuark  TD_T;
#line 503 "HTML2.w"
static XrmQuark  TEXTAREA_T;
#line 504 "HTML2.w"
static XrmQuark  TH_T;
#line 505 "HTML2.w"
static XrmQuark  TITLE_T;
#line 506 "HTML2.w"
static XrmQuark  TR_T;
#line 507 "HTML2.w"
static XrmQuark  TT_T;
#line 508 "HTML2.w"
static XrmQuark  UL_T;
#line 509 "HTML2.w"
static XrmQuark  U_T;
#line 510 "HTML2.w"
static XrmQuark  VAR_T;
#line 512 "HTML2.w"
static void init_tagnames(
#if NeedFunctionPrototypes
void
#endif
);
#line 606 "HTML2.w"
#define hex(n) ((n )<10 ?(n )+'0':(n )+'A'-10 )


#line 608 "HTML2.w"
static char * strdup_escaped(
#if NeedFunctionPrototypes
char *
#endif
);
#line 634 "HTML2.w"
static void submit_cb(
#if NeedFunctionPrototypes
Widget,XtPointer ,XtPointer 
#endif
);
#line 767 "HTML2.w"
static void reset_cb(
#if NeedFunctionPrototypes
Widget,XtPointer ,XtPointer 
#endif
);
#line 813 "HTML2.w"
static void radio_cb(
#if NeedFunctionPrototypes
Widget,XtPointer ,XtPointer 
#endif
);
#line 834 "HTML2.w"
static void start_form(
#if NeedFunctionPrototypes
Widget,Attrib 
#endif
);
#line 853 "HTML2.w"
static void end_form(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 862 "HTML2.w"
static void start_form_input(
#if NeedFunctionPrototypes
Widget,Attrib 
#endif
);
#line 965 "HTML2.w"
static void end_form_input(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 970 "HTML2.w"
static void start_form_textarea(
#if NeedFunctionPrototypes
Widget,Attrib 
#endif
);
#line 1009 "HTML2.w"
static void end_form_textarea(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 1021 "HTML2.w"
static void start_form_select(
#if NeedFunctionPrototypes
Widget,Attrib 
#endif
);
#line 1066 "HTML2.w"
static void end_form_select(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 1079 "HTML2.w"
static void start_form_option(
#if NeedFunctionPrototypes
Widget,Attrib 
#endif
);
#line 1100 "HTML2.w"
static void end_form_option(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 1123 "HTML2.w"
static void start_isindex(
#if NeedFunctionPrototypes
Widget,Attrib 
#endif
);
#line 1164 "HTML2.w"
static void end_isindex(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 1173 "HTML2.w"
static String  upper(
#if NeedFunctionPrototypes
String 
#endif
);
#line 1183 "HTML2.w"
static void trim(
#if NeedFunctionPrototypes
char *
#endif
);
#line 421 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 421 "HTML2.w"
static void init_iconentities(void)
#else
#line 421 "HTML2.w"
static void init_iconentities()
#endif
#line 422 "HTML2.w"
{
    int i;
    for (i = 0; i < XtNumber(iconentities); i++)
	iconentities[i].q = XrmStringToQuark(iconentities[i].name);
}
#line 512 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 512 "HTML2.w"
static void init_tagnames(void)
#else
#line 512 "HTML2.w"
static void init_tagnames()
#endif
#line 513 "HTML2.w"
{
    ABBREV_T = XrmStringToQuark("ABBREV");
    ABSTRACT_T = XrmStringToQuark("ABSTRACT");
    ACRONYM_T = XrmStringToQuark("ACRONYM");
    ADDRESS_T = XrmStringToQuark("ADDRESS");
    AU_T = XrmStringToQuark("AU");
    A_T = XrmStringToQuark("A");
    BASE_T = XrmStringToQuark("BASE");
    BIG_T = XrmStringToQuark("BIG");
    BLOCKQUOTE_T = XrmStringToQuark("BLOCKQUOTE");
    BODY_T = XrmStringToQuark("BODY");
    BQ_T = XrmStringToQuark("BQ");
    BR_T = XrmStringToQuark("BR");
    B_T = XrmStringToQuark("B");
    CAPTION_T = XrmStringToQuark("CAPTION");
    CHANGED_T = XrmStringToQuark("CHANGED");
    CITE_T = XrmStringToQuark("CITE");
    CODE_T = XrmStringToQuark("CODE");
    DD_T = XrmStringToQuark("DD");
    DEL_T = XrmStringToQuark("DEL");
    DFN_T = XrmStringToQuark("DFN");
    DIR_T = XrmStringToQuark("DIR");
    DISPLAY_T = XrmStringToQuark("DISPLAY");
    DIV_T = XrmStringToQuark("DIV");
    DL_T = XrmStringToQuark("DL");
    DT_T = XrmStringToQuark("DT");
    EM_T = XrmStringToQuark("EM");
    FIG_T = XrmStringToQuark("FIG");
    FOOTNOTE_T = XrmStringToQuark("FOOTNOTE");
    FORM_T = XrmStringToQuark("FORM");
    H1_T = XrmStringToQuark("H1");
    H2_T = XrmStringToQuark("H2");
    H3_T = XrmStringToQuark("H3");
    H4_T = XrmStringToQuark("H4");
    H5_T = XrmStringToQuark("H5");
    H6_T = XrmStringToQuark("H6");
    HEAD_T = XrmStringToQuark("HEAD");
    HR_T = XrmStringToQuark("HR");
    HTML_T = XrmStringToQuark("HTML");
    IMG_T = XrmStringToQuark("IMG");
    INPUT_T = XrmStringToQuark("INPUT");
    INS_T = XrmStringToQuark("INS");
    ISINDEX_T = XrmStringToQuark("ISINDEX");
    I_T = XrmStringToQuark("I");
    KBD_T = XrmStringToQuark("KBD");
    KEY_T = XrmStringToQuark("KEY");
    LANG_T = XrmStringToQuark("LANG");
    LINK_T = XrmStringToQuark("LINK");
    LI_T = XrmStringToQuark("LI");
    MARGIN_T = XrmStringToQuark("MARGIN");
    MATH_T = XrmStringToQuark("MATH");
    MENU_T = XrmStringToQuark("MENU");
    META_T = XrmStringToQuark("META");
    NOTE_T = XrmStringToQuark("NOTE");
    OL_T = XrmStringToQuark("OL");
    OPTION_T = XrmStringToQuark("OPTION");
    PCDATA_T = XrmStringToQuark("#PCDATA");
    PERSON_T = XrmStringToQuark("PERSON");
    PRE_T = XrmStringToQuark("PRE");
    P_T = XrmStringToQuark("P");
    QUOTE_T = XrmStringToQuark("QUOTE");
    Q_T = XrmStringToQuark("Q");
    SAMP_T = XrmStringToQuark("SAMP");
    SELECT_T = XrmStringToQuark("SELECT");
    SMALL_T = XrmStringToQuark("SMALL");
    STRONG_T = XrmStringToQuark("STRONG");
    STYLE_T = XrmStringToQuark("STYLE");
    SUB_T = XrmStringToQuark("SUB");
    SUP_T = XrmStringToQuark("SUP");
    S_T = XrmStringToQuark("S");
    TABLE_T = XrmStringToQuark("TABLE");
    TAB_T = XrmStringToQuark("TAB");
    TD_T = XrmStringToQuark("TD");
    TEXTAREA_T = XrmStringToQuark("TEXTAREA");
    TH_T = XrmStringToQuark("TH");
    TITLE_T = XrmStringToQuark("TITLE");
    TR_T = XrmStringToQuark("TR");
    TT_T = XrmStringToQuark("TT");
    UL_T = XrmStringToQuark("UL");
    U_T = XrmStringToQuark("U");
    VAR_T = XrmStringToQuark("VAR");
}
#line 608 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 608 "HTML2.w"
static char * strdup_escaped(char * s)
#else
#line 608 "HTML2.w"
static char * strdup_escaped(s)char * s;
#endif
#line 609 "HTML2.w"
{
    int n;
    char *t, *t1, *s2;

    for (n = 0, s2 = s; *s2; s2++, n++)
	if (*s2 == '/' || *s2 == '+' || *s2 == '?' || *s2 == '#' ||
	    *s2 == '%' || *s2 <= ' ' || *s2 == '\177' || *s2 == ':' ||
	    *s2 == '@') n += 2;
    t1 = t = XtMalloc((n + 1) * sizeof(*t));
    for (s2 = s; *s2; s2++)
	if (*s2 == '/' || *s2 == '+' || *s2 == '?' || *s2 == '#' ||
	    *s2 == '%' || *s2 <= ' ' || *s2 == '\177' || *s2 == ':' ||
	    *s2 == '@') {
	    *t++ = '%'; *t++ = hex(*s2/16); *t++ = hex(*s2 % 16);
	} else
	    *t++ = *s2;
    *t = '\0';
    return t1;
}
#line 634 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 634 "HTML2.w"
static void submit_cb(Widget self,XtPointer  client_data,XtPointer  call_data)
#else
#line 634 "HTML2.w"
static void submit_cb(self,client_data,call_data)Widget self;XtPointer  client_data;XtPointer  call_data;
#endif
#line 635 "HTML2.w"
{
    FormField h, field = (FormField) client_data;
    Form f = field->form;
    Widget html = XtParent(self);
    XfwfActivateFormInfo info;
    char *data, *value, *value2;
    Boolean set;
    int n, *positions, nrpositions, i;

    /* Estimate size of data */
    n = f->method == 2 ? 0 : strlen(f->action) + 1;
    if (field->name[0])				/* Submit-button itself */
	n += strlen(field->name) + 3 * strlen(field->value) + 2;
    for (h = f->fields; h; h = h->next) {
	switch (h->type) {
	case Text: case Password: case Textarea:
	    XtVaGetValues(h->w, XmNvalue, &value, NULL);
	    n += strlen(h->name) + 3 * strlen(value) + 2;
	    break;
	case Isindex:
	    XtVaGetValues(h->w, XmNvalue, &value, NULL);
	    n += 3 * strlen(value) + 2;
	    break;
	case Hidden:
	    n += strlen(h->name) + strlen(h->value) + 2;
	    break;
	case Checkbox: case Radio:
	    n += strlen(h->name) + 4;
	    break;
	case Select:
	    XmListGetSelectedPos(h->w, &positions, &nrpositions);
	    for (i = 0; i < nrpositions; i++)
		n += strlen(h->name) + 3 * strlen(h->options[i]) + 2;
	    break;
	case Submit: case Reset:
	    break;
	default:
	    assert(! "Cannot happen");
	}
    }

    /* Now construct the data */
    data = XtMalloc(n * sizeof(*data));
    if (f->method == 2) {			/* POST */
	data[0] = '\0';
    } else {					/* GET */
	strcpy(data, f->action);
	strcat(data, "?");
    }
    if (field->name[0]) {			/* Submit-button itself */
	strcat(data, field->name);
	strcat(data, "=");
	value2 = strdup_escaped(field->value);
	strcat(data, value2);
	XtFree(value2);
	strcat(data, "&");
    }
    for (h = f->fields; h; h = h->next) {
	switch (h->type) {
	case Text: case Password: case Textarea:
	    XtVaGetValues(h->w, XmNvalue, &value, NULL);
	    strcat(data, h->name);
	    strcat(data, "=");
	    value2 = strdup_escaped(value);
	    strcat(data, value2);
	    XtFree(value2);
	    if (h->next) strcat(data, "&");
	    break;
	case Isindex:
	    XtVaGetValues(h->w, XmNvalue, &value, NULL);
	    value2 = strdup_escaped(value);
	    strcat(data, value2);
	    XtFree(value2);
	    if (h->next) strcat(data, "&");
	    break;
	case Hidden:
	    strcat(data, h->name);
	    strcat(data, "=");
	    value2 = strdup_escaped(h->value);
	    strcat(data, value2);
	    XtFree(value2);
	    if (h->next) strcat(data, "&");
	    break;
	case Checkbox:
	    XtVaGetValues(h->w, XmNset, &set, NULL);
	    if (set) {
		strcat(data, h->name);
		strcat(data, "=on");
		if (h->next) strcat(data, "&");
	    }
	    break;
	case Radio:
	    XtVaGetValues(h->w, XmNset, &set, NULL);
	    if (set) {
		strcat(data, h->name);
		strcat(data, "=");
		strcat(data, h->value);
		if (h->next) strcat(data, "&");
	    }
	    break;
	case Select:
	    XmListGetSelectedPos(h->w, &positions, &nrpositions);
	    for (i = 0; i < nrpositions; i++) {
		strcat(data, h->name);
		strcat(data, "=");
		value2 = strdup_escaped(h->options[i]);
		strcat(data, value2);
		XtFree(value2);
		strcat(data, "&");
	    }
	    break;
	case Submit: case Reset:
	    break;
	default:
	    assert(! "Cannot happen");
	}
    }
    if (f->method == 2) {			/* POST */
	info.url = f->action;
	info.data = data;
	info.length = strlen(data);
	info.method = f->method;
    } else {					/* GET */
	info.url = data;
	info.data = NULL;
	info.length = 0;
	info.method = f->method;
    }
    XtCallCallbackList(self, ((XfwfHTML2Widget)html)->xfwfHTML2.activateForm, &info);
    dispose(data);
}
#line 767 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 767 "HTML2.w"
static void reset_cb(Widget self,XtPointer  client_data,XtPointer  call_data)
#else
#line 767 "HTML2.w"
static void reset_cb(self,client_data,call_data)Widget self;XtPointer  client_data;XtPointer  call_data;
#endif
#line 768 "HTML2.w"
{
    FormField h, field = (FormField) client_data;
    Form f = field->form;
    int i;

    for (h = f->fields; h; h = h->next) {
	switch (h->type) {
	case Text:
	    XtVaSetValues(h->w, XmNvalue, h->value, NULL);
	    break;
	case Isindex:
	    XtVaSetValues(h->w, XmNvalue, "", NULL);
	    break;
	case Password:
	    XtVaSetValues(h->w, XmNvalue, NULL, NULL);
	    break;
	case Checkbox:
	    XtVaSetValues(h->w, XmNset, h->checked, NULL);
	    break;
	case Radio:
	    XtVaSetValues(h->w, XmNset, h->checked, NULL);
	    break;
	case Textarea:
	    XtVaSetValues(h->w, XmNvalue, h->value, NULL);
	    break;
	case Select:
	    for (i = 0; i < h->nroptions; i++)
		if (h->options[i])
		    XmListSelectPos(h->w, i, FALSE);
		else
		    XmListDeselectPos(h->w, i);
	    break;
	case Hidden: case Submit: case Reset:
	    break;
	default:
	    assert(! "Cannot happen");
	}
    }
}
#line 813 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 813 "HTML2.w"
static void radio_cb(Widget self,XtPointer  client_data,XtPointer  call_data)
#else
#line 813 "HTML2.w"
static void radio_cb(self,client_data,call_data)Widget self;XtPointer  client_data;XtPointer  call_data;
#endif
#line 814 "HTML2.w"
{
    FormField h, field = (FormField) client_data;
    Form f = field->form;
    Widget html = XtParent(self);
    Boolean set;

    XtVaGetValues(self, XmNset, &set, NULL);
    if (! set)
	XtVaSetValues(self, XmNset, TRUE, NULL);	/* Switch on again */
    else
	for (h = f->fields; h; h = h->next)
	    if (h != field && h->type == Radio
		&& XmuCompareISOLatin1(h->name, field->name) == 0)
		XtVaSetValues(h->w, XmNset, FALSE, NULL);
}
#line 834 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 834 "HTML2.w"
static void start_form(Widget self,Attrib  attr)
#else
#line 834 "HTML2.w"
static void start_form(self,attr)Widget self;Attrib  attr;
#endif
#line 835 "HTML2.w"
{
    Form f;
    char method[15];

    new(f);
    f->next = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist; ((XfwfHTML2Widget)self)->xfwfHTML2.formlist = f;
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "ACTION", f->action, sizeof(f->action))) {
	f->action[0] = '\0';
	strncat(f->action, ((XfwfHTML2Widget)self)->xfwfHTML2.base, sizeof(f->action) - 1);
    }
    if (((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "METHOD", method, sizeof(method))
	&& XmuCompareISOLatin1(method, "POST") == 0)
	f->method = 2;
    else
	f->method = 0;
    f->fields = NULL;
}
#line 853 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 853 "HTML2.w"
static void end_form(Widget self)
#else
#line 853 "HTML2.w"
static void end_form(self)Widget self;
#endif
#line 854 "HTML2.w"
{
    /* Nothing to do */
}
#line 862 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 862 "HTML2.w"
static void start_form_input(Widget self,Attrib  attr)
#else
#line 862 "HTML2.w"
static void start_form_input(self,attr)Widget self;Attrib  attr;
#endif
#line 863 "HTML2.w"
{
    FormField f;
    char type[15], checked[1], size[15], maxlength[15];
    int width;
    TextStyle styleflags;

    if (! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist) return;			/* Not inside FORM */

    new(f);
    f->next = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields; ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields = f;
    f->form = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist;			/* Back pointer */

    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "TYPE", type, sizeof(type))) f->type = Text;
    else if (! XmuCompareISOLatin1(type, "TEXT")) f->type = Text;
    else if (! XmuCompareISOLatin1(type, "SUBMIT")) f->type = Submit;
    else if (! XmuCompareISOLatin1(type, "RESEt")) f->type = Reset;
    else if (! XmuCompareISOLatin1(type, "PASSWORD")) f->type = Password;
    else if (! XmuCompareISOLatin1(type, "CHECKBOX")) f->type = Checkbox;
    else if (! XmuCompareISOLatin1(type, "RADIO")) f->type = Radio;
    else if (! XmuCompareISOLatin1(type, "HIDDEN")) f->type = Hidden;
    else f->type = Text;

    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "NAME", f->name, sizeof(f->name)))
	f->name[0] = '\0';

    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "VALUE", f->value, sizeof(f->value)))
	f->value[0] = '\0';

    f->checked = ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "CHECKED", checked, sizeof(checked));

    if (((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "SIZE", size, sizeof(size))
	&& sscanf(size, "%u", &width) == 1)
	width *= 10;
    else
	width = 200;

    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "MAXLENGTH", maxlength, sizeof(maxlength)))
	strcpy(maxlength, "1024");

    switch (f->type) {
    case Text:
	f->w = XtVaCreateManagedWidget
	    (f->name, xmTextFieldWidgetClass, self,
	     XmNwidth, width, XmNvalue, f->value, NULL);
	break;
    case Password:
	f->w = XtVaCreateManagedWidget
	    (f->name, xmTextFieldWidgetClass, self,
	     XmNwidth, width, NULL);
	/* This needs work: text must be masked */
	break;
    case Checkbox:
	f->w = XtVaCreateManagedWidget
	    (f->name, xmToggleButtonWidgetClass, self,
	     XmNindicatorOn, TRUE,
	     XmNvisibleWhenOff, TRUE,
	     XmNset, f->checked,
	     XtVaTypedArg, XmNlabelString, XtRString, "", 1,
	     XmNindicatorType, XmN_OF_MANY, NULL);
	break;
    case Radio:
	f->w = XtVaCreateManagedWidget
	    (f->name, xmToggleButtonWidgetClass, self,
	     XmNindicatorOn, TRUE,
	     XmNvisibleWhenOff, TRUE,
	     XmNset, f->checked,
	     XtVaTypedArg, XmNlabelString, XtRString, "", 1,
	     XmNindicatorType, XmONE_OF_MANY, NULL);
	XtAddCallback(f->w, XmNvalueChangedCallback, radio_cb, f);
	break;
    case Submit:
	if (!f->value[0]) strcpy(f->value, "Submit");
	f->w = XtVaCreateManagedWidget
	    (f->name, xmPushButtonWidgetClass, self,
	     XtVaTypedArg, XmNlabelString, XtRString,
	     f->value, strlen(f->value) + 1, NULL);
	XtAddCallback(f->w, XmNactivateCallback, submit_cb, f);
	break;
    case Reset:
	if (!f->value[0]) strcpy(f->value, "Reset");
	f->w = XtVaCreateManagedWidget
	    (f->name, xmPushButtonWidgetClass, self,
	     XtVaTypedArg, XmNlabelString, XtRString,
	     f->value, strlen(f->value) + 1, NULL);
	XtAddCallback(f->w, XmNactivateCallback, reset_cb, f);
	break;
    case Hidden:
	f->w = NULL;
	break;
    default:
	assert(! "Cannot happen");
    }
    if (f->type != Hidden) {
	styleflags = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->textstyle;
	styleflags &= ~(FtALIGNFIXEDWIDTH|FtALIGNFIXEDHEIGHT);
	styleflags |= FtALIGNMIDDLE;
	((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_inline(self, f->w, styleflags, 0, 0, 0,
		    ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinehmargin, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinevmargin,
		    ((XfwfHTML2Widget)self)->xfwfSimpleSGML.extradata[((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->data]);
    }
}
#line 965 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 965 "HTML2.w"
static void end_form_input(Widget self)
#else
#line 965 "HTML2.w"
static void end_form_input(self)Widget self;
#endif
#line 966 "HTML2.w"
{
    /* Nothing to do */
}
#line 970 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 970 "HTML2.w"
static void start_form_textarea(Widget self,Attrib  attr)
#else
#line 970 "HTML2.w"
static void start_form_textarea(self,attr)Widget self;Attrib  attr;
#endif
#line 971 "HTML2.w"
{
    FormField f;
    char h[15];
    int rows, cols;
    TextStyle styleflags;

    if (! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist) return;			/* Not inside FORM */

    new(f);
    f->next = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields; ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields = f;
    f->form = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist;			/* Back pointer */
    f->type = Textarea;
    f->value[0] = '\0';
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "NAME", f->name, sizeof(f->name)))
	f->name[0] = '\0';
    if (((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "ROWS", h, sizeof(h))
	&& sscanf(h, "%u", &rows) == 1)
	rows *= 14;
    else
	rows = 100;
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "COLS", h, sizeof(h))
	&& sscanf(h, "%u", &cols) == 1)
	cols *= 10;
    else
	cols = 200;

    f->w = XtVaCreateManagedWidget
	    (f->name, xmTextWidgetClass, self,
	     XmNwidth, cols, XmNheight, rows,
	     XmNeditMode, XmMULTI_LINE_EDIT, NULL);
    styleflags = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->textstyle;
    styleflags &= ~(FtALIGNFIXEDWIDTH|FtALIGNFIXEDHEIGHT);
    styleflags |= FtALIGNMIDDLE;
    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_inline(self, f->w, styleflags, 0, 0, 0,
		((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinehmargin, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinevmargin,
		((XfwfHTML2Widget)self)->xfwfSimpleSGML.extradata[((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->data]);
}
#line 1009 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1009 "HTML2.w"
static void end_form_textarea(Widget self)
#else
#line 1009 "HTML2.w"
static void end_form_textarea(self)Widget self;
#endif
#line 1010 "HTML2.w"
{
    FormField f;

    if (! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist || ! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields
	|| ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields->type != Textarea) return;

    f = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields;
    f->value[0] = '\0';
    strncat(f->value, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.contentbuffer, sizeof(f->value) - 1);
}
#line 1021 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1021 "HTML2.w"
static void start_form_select(Widget self,Attrib  attr)
#else
#line 1021 "HTML2.w"
static void start_form_select(self,attr)Widget self;Attrib  attr;
#endif
#line 1022 "HTML2.w"
{
    FormField f;
    char h[15];
    int width = 250, height = 100;
    TextStyle styleflags;
    Bool multiple;

    if (! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist) return;			/* Not inside FORM */

    new(f);
    f->next = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields; ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields = f;
    f->form = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist;			/* Back pointer */
    f->type = Select;
    f->nroptions = 0;
    f->options = NULL;
    f->selected = NULL;
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "NAME", f->name, sizeof(f->name)))
	f->name[0] = '\0';
    if (((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "WIDTH", h, sizeof(h))
	&& sscanf(h, "%u", &width) == 1)
	width *= 10;
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "HEIGHT", h, sizeof(h))
	&& sscanf(h, "%u", &height) == 1)
	height *= 14;
    multiple = ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "MULTIPLE", h, sizeof(h));

    f->w = XmCreateScrolledList(self, f->name, NULL, 0);
    XtVaSetValues
	(XtParent(f->w), XmNwidth, width, XmNheight, height,
	 NULL);
    XtVaSetValues
	(f->w,
	 XmNselectionPolicy, multiple ? XmMULTIPLE_SELECT : XmSINGLE_SELECT,
	 NULL);
    XtManageChild(f->w);
    styleflags = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->textstyle;
    styleflags &= ~(FtALIGNFIXEDWIDTH|FtALIGNFIXEDHEIGHT);
    styleflags |= FtALIGNMIDDLE;
    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_inline(self, XtParent(f->w), styleflags, 0, 0, 0,
		((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinehmargin, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinevmargin,
		((XfwfHTML2Widget)self)->xfwfSimpleSGML.extradata[((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->data]);
    /* Not yet implemented */
}
#line 1066 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1066 "HTML2.w"
static void end_form_select(Widget self)
#else
#line 1066 "HTML2.w"
static void end_form_select(self)Widget self;
#endif
#line 1067 "HTML2.w"
{
    /* Nothing to do */
}
#line 1079 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1079 "HTML2.w"
static void start_form_option(Widget self,Attrib  attr)
#else
#line 1079 "HTML2.w"
static void start_form_option(self,attr)Widget self;Attrib  attr;
#endif
#line 1080 "HTML2.w"
{
    char h[LITLEN];
    FormField f;

    if (! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist || ! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields
	|| ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields->type != Select) return;

    f = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields;
    f->nroptions++;
    renewarray(f->options, f->nroptions);
    renewarray(f->selected, f->nroptions);
    if (((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "VALUE", h, sizeof(h)))
	f->options[f->nroptions-1] = XtNewString(h);
    else
	f->options[f->nroptions-1] = NULL;
    f->selected[f->nroptions-1] =
	((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "SELECTED", h, sizeof(h));

}
#line 1100 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1100 "HTML2.w"
static void end_form_option(Widget self)
#else
#line 1100 "HTML2.w"
static void end_form_option(self)Widget self;
#endif
#line 1101 "HTML2.w"
{
    XmString value2;
    FormField f;

    if (! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist || ! ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields
	|| ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields->type != Select) return;

    f = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist->fields;
    if (! f->options[f->nroptions-1]) {
	f->options[f->nroptions-1] = XtNewString(((XfwfHTML2Widget)self)->xfwfSimpleSGML.contentbuffer);
	trim(f->options[f->nroptions-1]);
    }
    value2 = XmStringCreate(((XfwfHTML2Widget)self)->xfwfSimpleSGML.contentbuffer, XmFONTLIST_DEFAULT_TAG);
    XmListAddItem(f->w, value2, 0);
    XmStringFree(value2);
    if (f->selected[f->nroptions-1])
	XmListSelectPos(f->w, f->nroptions-1, FALSE);
}
#line 1123 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1123 "HTML2.w"
static void start_isindex(Widget self,Attrib  attr)
#else
#line 1123 "HTML2.w"
static void start_isindex(self,attr)Widget self;Attrib  attr;
#endif
#line 1124 "HTML2.w"
{
    Form form;
    FormField f;
    char prompt[LITLEN];
    int width;
    TextStyle styleflags;

    /* Create a form */
    new(form);
    form->next = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist; ((XfwfHTML2Widget)self)->xfwfHTML2.formlist = form;
    form->method = 0;
    form->fields = NULL;
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "HREF", form->action, sizeof(form->action))) {
	form->action[0] = '\0';
	strncat(form->action, ((XfwfHTML2Widget)self)->xfwfHTML2.base, sizeof(form->action) - 1);
    }

    /* Create a text field */
    new(f);
    f->next = form->fields; form->fields = f;
    f->form = form;				/* Back pointer */
    f->type = Isindex;
    f->w = XtVaCreateManagedWidget
	(f->name, xmTextFieldWidgetClass, self,
	 XmNwidth, ((XfwfHTML2Widget)self)->core.width/2, XmNvalue, f->value, NULL);
    XtAddCallback(f->w, XmNactivateCallback, submit_cb, f);

    styleflags = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->textstyle;
    styleflags &= ~(FtALIGNFIXEDWIDTH|FtALIGNFIXEDHEIGHT);
    styleflags |= FtALIGNMIDDLE;
    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_vspace(self, 0);
    if (! ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.get_attrib(self, attr, "PROMPT", prompt, sizeof(prompt)))
	((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_word(self, prompt, strlen(prompt), ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->fg, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->bg,
		  styleflags, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.extradata[((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->data]);
    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_inline(self, f->w, styleflags, 0, 0, 0,
		((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinehmargin, ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->inlinevmargin,
		((XfwfHTML2Widget)self)->xfwfSimpleSGML.extradata[((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->data]);
    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfFormattedText_class.add_vspace(self, 0);
}
#line 1164 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1164 "HTML2.w"
static void end_isindex(Widget self)
#else
#line 1164 "HTML2.w"
static void end_isindex(self)Widget self;
#endif
#line 1165 "HTML2.w"
{
    /* Nothing to do */
}
#line 1173 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1173 "HTML2.w"
static String  upper(String  s)
#else
#line 1173 "HTML2.w"
static String  upper(s)String  s;
#endif
#line 1174 "HTML2.w"
{
    String t;
    if (s != NULL) for (t = s; *t; t++) *t = _toupper(*t);
    return s;
}
#line 1183 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 1183 "HTML2.w"
static void trim(char * s)
#else
#line 1183 "HTML2.w"
static void trim(s)char * s;
#endif
#line 1184 "HTML2.w"
{
    int i, j;

    if (!s) return;
    for (j = 0; isspace(s[j]); j++) ;
    for (i = strlen(s); i > j && isspace(s[i-1]); i--) s[i-1] = '\0';
    if (j != 0) memmove(s, s + j, i - j + 1);
}

static XtResource resources[] = {
#line 20 "HTML2.w"
{XtNbase,XtCBase,XtRString,sizeof(((XfwfHTML2Rec*)NULL)->xfwfHTML2.base),XtOffsetOf(XfwfHTML2Rec,xfwfHTML2.base),XtRImmediate,(XtPointer)NULL },
#line 28 "HTML2.w"
{XtNresolveURL,XtCResolveURL,XtRCallback,sizeof(((XfwfHTML2Rec*)NULL)->xfwfHTML2.resolveURL),XtOffsetOf(XfwfHTML2Rec,xfwfHTML2.resolveURL),XtRImmediate,(XtPointer)NULL },
#line 34 "HTML2.w"
{XtNactivateForm,XtCActivateForm,XtRCallback,sizeof(((XfwfHTML2Rec*)NULL)->xfwfHTML2.activateForm),XtOffsetOf(XfwfHTML2Rec,xfwfHTML2.activateForm),XtRImmediate,(XtPointer)NULL },
};

XfwfHTML2ClassRec xfwfHTML2ClassRec = {
{ /* core_class part */
/* superclass   	*/  (WidgetClass) &xfwfSimpleSGMLClassRec,
/* class_name   	*/  "XfwfHTML2",
/* widget_size  	*/  sizeof(XfwfHTML2Rec),
/* class_initialize 	*/  class_initialize,
/* class_part_initialize*/  _resolve_inheritance,
/* class_inited 	*/  FALSE,
/* initialize   	*/  initialize,
/* initialize_hook 	*/  NULL,
/* realize      	*/  XtInheritRealize,
/* actions      	*/  NULL,
/* num_actions  	*/  0,
/* resources    	*/  resources,
/* num_resources 	*/  3,
/* xrm_class    	*/  NULLQUARK,
/* compres_motion 	*/  FALSE ,
/* compress_exposure 	*/  XtExposeCompressMultiple |XtExposeGraphicsExposeMerged ,
/* compress_enterleave 	*/  True ,
/* visible_interest 	*/  False ,
/* destroy      	*/  destroy,
/* resize       	*/  XtInheritResize,
/* expose       	*/  XtInheritExpose,
/* set_values   	*/  set_values,
/* set_values_hook 	*/  NULL,
/* set_values_almost 	*/  XtInheritSetValuesAlmost,
/* get_values+hook 	*/  NULL,
/* accept_focus 	*/  XtInheritAcceptFocus,
/* version      	*/  XtVersion,
/* callback_private 	*/  NULL,
/* tm_table      	*/  defaultTranslations,
/* query_geometry 	*/  XtInheritQueryGeometry,
/* display_acceleator 	*/  XtInheritDisplayAccelerator,
/* extension    	*/  NULL 
},
{ /* composite_class part */
XtInheritGeometryManager,
XtInheritChangeManaged,
XtInheritInsertChild,
XtInheritDeleteChild,
NULL
},
{ /* constraint_class part */
/* constraint_resources     */  NULL,
/* num_constraint_resources */  0,
/* constraint_size          */  sizeof(XfwfHTML2ConstraintRec),
/* constraint_initialize    */  NULL,
/* constraint_destroy       */  NULL,
/* constraint_set_values    */  NULL,
/* constraint_extension     */  NULL 
},
{ /* XmManager class part */
#define manager_extension extension
/* translations                 */  XtInheritTranslations ,
/* syn_resources                */  NULL ,
/* num_syn_resources            */  0 ,
/* syn_constraint_resources     */  NULL ,
/* num_syn_constraint_resources */  0 ,
/* parent_process               */  XmInheritParentProcess,
/* manager_extension            */  NULL ,
},
{ /* XfwfFormattedText_class part */
XtInherit_add_word,
XtInherit_add_hspace,
XtInherit_add_vspace,
XtInherit_add_inline,
XtInherit_add_parshape,
XtInherit_add_hrule,
XtInherit_add_eod,
XtInherit_pass_click,
XtInherit_reformat_scrollbar,
XtInherit_get_em_of_textstyle,
XtInherit_get_space_of_textstyle,
XtInherit_get_lineheight_of_textstyle,
XtInherit_get_word_extent,
},
{ /* XfwfSimpleSGML_class part */
pop_style,
make_child_from_source,
XtInherit_scan_num,
XtInherit_push_style,
get_entity,
XtInherit_process_entity,
XtInherit_add_endtag,
add_starttag,
XtInherit_add_text,
XtInherit_get_attrib,
},
{ /* XfwfHTML2_class part */
 /* dummy */  0
},
};
WidgetClass xfwfHTML2WidgetClass = (WidgetClass) &xfwfHTML2ClassRec;
static void _resolve_inheritance(class)
WidgetClass class;
{
  XfwfHTML2WidgetClass c = (XfwfHTML2WidgetClass) class;
  XfwfHTML2WidgetClass super;
  static CompositeClassExtensionRec extension_rec = {
    NULL, NULLQUARK, XtCompositeExtensionVersion,
    sizeof(CompositeClassExtensionRec), True};
  CompositeClassExtensionRec *ext;
  ext = (XtPointer)XtMalloc(sizeof(*ext));
  *ext = extension_rec;
  ext->next_extension = c->composite_class.extension;
  c->composite_class.extension = ext;
  if (class == xfwfHTML2WidgetClass) return;
  super = (XfwfHTML2WidgetClass)class->core_class.superclass;
}
#line 84 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 84 "HTML2.w"
static void class_initialize(void)
#else
#line 84 "HTML2.w"
static void class_initialize()
#endif
#line 85 "HTML2.w"
{
    init_iconentities();
    init_tagnames();
}
#line 90 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 90 "HTML2.w"
static void initialize(Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 90 "HTML2.w"
static void initialize(request,self,args,num_args)Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 91 "HTML2.w"
{
    XrmDatabase db;

    if (((XfwfHTML2Widget)self)->xfwfHTML2.base) ((XfwfHTML2Widget)self)->xfwfHTML2.base = XtNewString(((XfwfHTML2Widget)self)->xfwfHTML2.base);
    ((XfwfHTML2Widget)self)->xfwfHTML2.formlist = NULL;
    db = XrmGetStringDatabase("*TEXTAREA.savecontent:TRUE\n\
*TEXTAREA.hide:TRUE\n\
*OPTION.savecontent:TRUE\n\
*OPTION.hide:TRUE\n");
    XrmMergeDatabases(db, &((XfwfHTML2Widget)self)->xfwfSimpleSGML.styledb);
}
#line 103 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 103 "HTML2.w"
static Boolean  set_values(Widget  old,Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 103 "HTML2.w"
static Boolean  set_values(old,request,self,args,num_args)Widget  old;Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 104 "HTML2.w"
{
    if (((XfwfHTML2Widget)old)->xfwfHTML2.base != ((XfwfHTML2Widget)self)->xfwfHTML2.base) {
	if (((XfwfHTML2Widget)old)->xfwfHTML2.base) XtFree(((XfwfHTML2Widget)old)->xfwfHTML2.base);
	if (((XfwfHTML2Widget)self)->xfwfHTML2.base) ((XfwfHTML2Widget)self)->xfwfHTML2.base = XtNewString(((XfwfHTML2Widget)self)->xfwfHTML2.base);
    }
    return FALSE;
}
#line 116 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 116 "HTML2.w"
static Bool  get_entity(Widget self,const  String  name,Cardinal  namelen,char  val[],Cardinal  maxlen,int * charset)
#else
#line 116 "HTML2.w"
static Bool  get_entity(self,name,namelen,val,maxlen,charset)Widget self;const  String  name;Cardinal  namelen;char  val[];Cardinal  maxlen;int * charset;
#endif
#line 117 "HTML2.w"
{
    char s[NAMELEN+1];
    XrmQuark q;
    int i;

    s[0] = '\0';
    q = XrmStringToQuark(strncat(s, name, min(NAMELEN, namelen)));
    for (i = 0; i < XtNumber(iconentities); i++)
	if (iconentities[i].q == q) {
	    val[0] = '\0';
	    strncat(val, iconentities[i].value, maxlen);
	    *charset = iconentities[i].charset;
	    return TRUE;
	}
    /* Not found, try inherited method */
    return xfwfSimpleSGMLClassRec.xfwfSimpleSGML_class.get_entity(self, name, namelen, val, maxlen, charset);
}
#line 140 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 140 "HTML2.w"
static void add_starttag(Widget self,const  String  name,Cardinal  namelen,Attrib  attr)
#else
#line 140 "HTML2.w"
static void add_starttag(self,name,namelen,attr)Widget self;const  String  name;Cardinal  namelen;Attrib  attr;
#endif
#line 141 "HTML2.w"
{
    char t[NAMELEN+1] = "";
    XrmQuark q;
    FormatInfo sty;

    q = XrmStringToQuark(upper(strncat(t, name, min(NAMELEN, namelen))));

    /* #PCDATA ends at next start tag */
    assert(q != PCDATA_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != PCDATA_T);
    if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == PCDATA_T)
	((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);

    if (q != HEAD_T && q != PCDATA_T && q != TITLE_T && q != META_T
	&& q != LINK_T && q != STYLE_T && q != ISINDEX_T) {
	/* Check that we're not in HEAD */
	for (sty = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack; sty && sty->tag != HEAD_T; sty = sty->next) ;
	if (sty) {				/* Yes, we're in HEAD */
	    while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T)
		((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	    if (q != BODY_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "BODY", 4, NULL);
	}
    }

    if (q == H1_T || q == H2_T || q == H3_T || q == H4_T
	|| q == H5_T || q == H6_T) {
	/* H? must be a child of DIV, BODY or FORM, pop other elements */
	/* May also be child of A, although deprecated */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != A_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DIV_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != BODY_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != FORM_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DIV_T && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != BODY_T
	    && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != FORM_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "BODY", 4, NULL);
    } else if (q == BODY_T) {
	/* BODY must be a child of HTML */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "HTML", 4, NULL);
    } else if (q == FORM_T) {
	/* FORM must be a child of HTML */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "HTML", 4, NULL);
    } else if (q == LI_T) {
	/* LI must be a child of OL, UL, DIR, or MENU */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != OL_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != UL_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DIR_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != MENU_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (! ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "UL", 2, NULL);
    } else if (q == DT_T) {
	/* DT must be a child of DL */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DL_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DL_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "DL", 2, NULL);
    } else if (q == DD_T) {
	/* DD must be a child of DL */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DL_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != DL_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "DL", 2, NULL);
    } else if (q == P_T || q == NOTE_T || q == ABSTRACT_T  || q == DIR_T 
	       || q == ADDRESS_T || q == UL_T || q == OL_T || q == DL_T
	       || q == PRE_T || q == QUOTE_T || q == MENU_T || q == DIV_T
	       || q == TABLE_T || q == DISPLAY_T || q == FIG_T) {
	/* Block elements only inside block containers */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == P_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == PRE_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == PCDATA_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == SUB_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == SUP_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == B_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == U_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == S_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == TT_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == I_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == BIG_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == SMALL_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == EM_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == STRONG_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == CODE_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == SAMP_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == KBD_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == VAR_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == CITE_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == TAB_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == MATH_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == A_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == IMG_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == BR_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == Q_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == LANG_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == AU_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == DFN_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == PERSON_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == ACRONYM_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == ABBREV_T || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == INS_T
	       || ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == DEL_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (! ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "BODY", 4, NULL);
    } else if (q == TITLE_T || q == LINK_T || q == STYLE_T
	       || q == META_T || q == BASE_T) {
	/* Head elements must be child of HEAD */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HEAD_T && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HTML_T)
	    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != HEAD_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "HEAD", 4, NULL);
    } else if (q == HTML_T) {
	/* HTML may not be a descendant of anything */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
    } else if (q == TD_T || q == TH_T) {
	/* TD and TH must be child of TR */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
 	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != TR_T
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != TABLE_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != TR_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "TR", 2, NULL);
    } else if (q == TR_T) {
	/* TR must be child of TABLE */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next
	       && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != TABLE_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != TABLE_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "TABLE", 5, NULL);
    } else if (q == OPTION_T) {
	/* OPTION must be child of SELECT */
	while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next && ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != SELECT_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != SELECT_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "SELECT", 6, NULL);
    } else if (q == PCDATA_T || q == SUB_T || q == SUP_T || q == B_T
	       || q == U_T || q == S_T || q == TT_T || q == I_T
	       || q == BIG_T || q == SMALL_T || q == EM_T
	       || q == STRONG_T  || q == CODE_T || q == SAMP_T
	       || q == KBD_T || q == VAR_T || q == CITE_T
	       || q == TAB_T || q == MATH_T || q == A_T || q == IMG_T
	       || q == BR_T || q == Q_T || q == LANG_T || q == AU_T
	       || q == DFN_T || q == PERSON_T || q == ACRONYM_T
	       || q == ABBREV_T || q == INS_T || q == DEL_T
	       || q == A_T) {
	/* Text must be inside a text container */
	for (;;) {
	    if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == DL_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == OL_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == UL_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == DIR_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == MENU_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == SELECT_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == HEAD_T)
		((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
	    else if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == TABLE_T)
		((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "TR", 2, NULL);
	    else if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == TR_T)
		((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "TD", 2, NULL);
	    else if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == DD_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == BODY_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == BLOCKQUOTE_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == BQ_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == ADDRESS_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == DIV_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == FORM_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == TD_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == TH_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == FIG_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == NOTE_T
		|| ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == HTML_T)
		((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.add_starttag(self, "P", 1, NULL);
	    else
		break;
	}
    }
#if 0
    if (q == A_T) {
	/* A may not be a descendant of A */
	for (sty = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack; sty->next; sty = sty->next)
	    if (sty->tag == A_T) {
		while (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag != A_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
		((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
		break;
	    }
	if (((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->tag == PCDATA_T) ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.pop_style(self);
    }
#endif

    /* Check for form element */
    if (q == FORM_T) start_form(self, attr);
    else if (q == INPUT_T) start_form_input(self, attr);
    else if (q == TEXTAREA_T) start_form_textarea(self, attr);
    else if (q == SELECT_T) start_form_select(self, attr);
    else if (q == OPTION_T) start_form_option(self, attr);
    else if (q == ISINDEX_T) start_isindex(self, attr);

    /* Finally, push the element itself */
    ((XfwfHTML2WidgetClass)self->core.widget_class)->xfwfSimpleSGML_class.push_style(self, q, attr);
}
#line 319 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 319 "HTML2.w"
static void pop_style(Widget self)
#else
#line 319 "HTML2.w"
static void pop_style(self)Widget self;
#endif
#line 320 "HTML2.w"
{
    FormatInfo sty;

    assert(((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack->next != NULL);
    sty = ((XfwfHTML2Widget)self)->xfwfSimpleSGML.stystack;
    if (sty->tag == FORM_T) end_form(self);
    else if (sty->tag == INPUT_T) end_form_input(self);
    else if (sty->tag == TEXTAREA_T) end_form_textarea(self);
    else if (sty->tag == SELECT_T) end_form_select(self);
    else if (sty->tag == OPTION_T) end_form_option(self);
    else if (sty->tag == ISINDEX_T) end_isindex(self);

    xfwfSimpleSGMLClassRec.xfwfSimpleSGML_class.pop_style(self);
}
#line 343 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 343 "HTML2.w"
static void make_child_from_source(Widget self,Widget  w,const  String  src)
#else
#line 343 "HTML2.w"
static void make_child_from_source(self,w,src)Widget self;Widget  w;const  String  src;
#endif
#line 344 "HTML2.w"
{
    XfwfResolveRec resolve;

    resolve.url = src;
    resolve.widget = w;
    XtCallCallbackList(self, ((XfwfHTML2Widget)self)->xfwfHTML2.resolveURL, &resolve);
}
#line 354 "HTML2.w"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 354 "HTML2.w"
static void destroy(Widget self)
#else
#line 354 "HTML2.w"
static void destroy(self)Widget self;
#endif
#line 355 "HTML2.w"
{
    Form f, f1;
    FormField h, h1;
    int i;

    f = ((XfwfHTML2Widget)self)->xfwfHTML2.formlist;
    while (f) {
	h = f->fields;
	while (h) {
	    if (h->type == Select) {
		for (i = 0; i < h->nroptions; i++)
		    dispose(h->options[i]);
		dispose(h->options);
	    }		    
	    h1 = h;
	    h = h->next;
	    dispose(h1);
	}
	f1 = f;
	f = f->next;
	dispose(f1);
    }
}
#line 40 "HTML2.w"
#line 45 "HTML2.w"
